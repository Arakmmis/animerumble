"use strict";

var socket = io("/game");
var chat = io("/chat");
"use strict";

Vue.use(VTooltip);
var app = new Vue({
  el: "#app",
  data: {
    mode: "game",
    chat: [],
    lobbychat: [],
    chatSend: "",
    chatChannel: "ingame",
    chatNotif: {
      lobby: false,
      ingame: false
    },
    source: {
      energy: {
        ally: {}
      },
      meta: {}
    },
    packet: [],
    state: {
      skill: {
        offense: null,
        skill: null,
        target: null,
        aim: null
      },
      timer: {
        turn: 100
      },
      onSkill: false,
      button: {},
      description: null,
      winner: {
        state: false,
        name: ""
      },
      energy: {
        modal: false,
        random: 0
      },
      exchange: {
        modal: false,
        used: false,
        energy: {},
        val: ""
      }
    },
    showModal: true
  },
  methods: {
    onSurrender: function onSurrender() {
      console.log("surrender");
      socket.emit("surrender", {
        room: this.source.room
      });
    },
    onChat: function onChat() {
      var channel = this.chatChannel === "ingame" ? "ingame" : "lobby";
      var packet = {
        channel: channel,
        room: this.source.room,
        message: this.chatSend
      };
      chat.emit("chat", packet);
      this.chatSend = "";
    },
    scrollChat: function (_scrollChat) {
      function scrollChat() {
        return _scrollChat.apply(this, arguments);
      }

      scrollChat.toString = function () {
        return _scrollChat.toString();
      };

      return scrollChat;
    }(function () {
      setTimeout(function () {
        scrollChat();
      }, 100);
    }),
    onExchange: function onExchange(e) {
      //Sound
      this.$refs.soundClick.play();
      var state = this.state;
      this.source.energy.ally = e.energy;
      this.source.energy.ally.r = this.source.energy.ally.r - this.state.energy.random;
      state.exchange.energy = e.cost;
      state.exchange.modal = false;
      state.exchange.used = true;
      state.exchange.val = e.exchange;
      state.button.ally.forEach(function (x, xi) {
        if (x.onSkill === false) {
          console.log(x.name);
          x.skill.forEach(function (s, si) {
            var energy = energyManagement({
              heroIndex: xi,
              skill: si
            }, "check");
            s.button = s.disabled || energy ? true : false;
            console.log(energy, s.disabled, s.button);
          });
        }
      }); //Clean Skill Buffer

      if (state.skill.offense !== null && state.skill.target === null) {
        //Switch Choice
        //Button Management
        buttonManagement(state.skill, "onCancel"); //Clean Buffer

        state.skill = {
          offense: null,
          skill: null,
          skillId: null,
          target: null,
          aim: null,
          heroIndex: null
        };
      }
    },
    onDone: function onDone(e) {
      console.log(e);
      app.source.myTurn = false; //Sound

      this.$refs.soundEndTurn.play(); //Define

      var state = this.state;
      var packet = e.packet; //Organize

      state.energy.modal = false;
      packet = packet.filter(function (x) {
        return x.skill !== null && x.offense !== null && x.target !== null && x.aim !== null && x.heroIndex !== null;
      });
      packet.unshift(e.energy);

      if (state.exchange.used === true) {
        packet.unshift({
          msg: "exchange",
          val: state.exchange.val
        }, state.exchange.energy);
        state.exchange.used = false;
      } //Send


      socket.emit("sequence", {
        packet: packet,
        room: this.source.room
      }); //Reset

      state.energy.random = 0;
      this.packet = [];
      state.skill = {
        offense: null,
        skill: null,
        skillId: null,
        target: null,
        aim: null,
        heroIndex: null
      };
    },
    onSkill: function onSkill(payload) {
      //Define and Switch State
      var state = this.state;
      var marking = this.source.ally[payload.heroIndex].skill[payload.skillIndex].marking;
      var temporary = {
        offense: payload.name,
        skill: payload.skillIndex,
        skillId: payload.skillId,
        target: null,
        aim: payload.target,
        heroIndex: payload.heroIndex,
        marking: marking
      }; //Is Skill Chosen?

      var isOnSkill = state.button.ally[temporary.heroIndex].onSkill;

      if (isOnSkill === false && state.skill.offense === null && state.skill.target === null) {
        //First Choice
        //Buffer Skill
        state.skill = temporary; //Button Management

        buttonManagement(temporary, "onSkill");
      } else if (isOnSkill === false && state.skill.offense !== null && state.skill.target === null) {
        //Switch Choice
        //Button Management
        buttonManagement(state.skill, "onCancel");
        setTimeout(function () {
          buttonManagement(temporary, "onSkill");
        }, 100); //Buffer Skill

        state.skill = temporary;
      } else if (isOnSkill === true) {
        //Cancel Choice
        energyManagement(temporary, "add"); //Button Management

        buttonManagement(state.skill, "onCancel");
        buttonManagement(temporary, "onSelf");
        this.packet = this.packet.filter(function (x) {
          return x.offense !== temporary.offense;
        }); //Clean Skill Buffer

        state.skill = {
          offense: null,
          skill: null,
          skillId: null,
          target: null,
          aim: null,
          heroIndex: null
        }; //State Management

        state.button.ally[temporary.heroIndex].onSkill = false;
      }
    },
    onTarget: function onTarget(payload) {
      //Sound
      this.$refs.soundClick.play(); //Define State

      var state = this.state; //Buffer Skill

      if (state.skill.aim === "allenemy" || state.skill.aim === "randomenemy") {
        console.log(state.button.enemy);
        state.skill.target = state.button.enemy.filter(function (x) {
          return x.button !== true && x.name !== payload.name;
        }).map(function (x) {
          return x.name;
        });
        state.skill.target.unshift(payload.name);
      } else if (state.skill.aim === "allally") {
        state.skill.target = state.button.ally.map(function (x) {
          return x.name;
        });
      } else if (state.skill.aim === "allenemyallally") {
        state.skill.target = state.button.enemy.filter(function (x) {
          return x.button !== true && x.name !== payload.name;
        }).map(function (x) {
          return x.name;
        });
        state.skill.target.unshift(payload.name);
        var ally = state.button.ally.map(function (x) {
          return x.name;
        });
        state.skill.target = state.skill.target.concat(ally);
      } else if (state.skill.aim === "otherally") {
        state.skill.target = state.button.ally.filter(function (x) {
          return x.name !== state.skill.offense;
        }).map(function (x) {
          return x.name;
        });
      } else {
        state.skill.target = [payload.name];
      } //Register Skill


      this.packet.push(this.state.skill); //Energy Management

      energyManagement(state.skill, "substract"); //Button Management
      // buttonManagement(state.skill, "onSkill");

      buttonManagement(state.skill, "onTarget"); //State Management

      state.button.ally[state.skill.heroIndex].onSkill = true; //Clean Skill Buffer

      state.skill = {
        offense: null,
        skill: null,
        skillId: null,
        target: null,
        aim: null,
        heroIndex: null
      };
    },
    onAttack: function onAttack(payload) {
      //Sound
      this.$refs.soundClick.play();
      this.state.energy.modal = true;
    },
    onDescription: function onDescription(payload) {
      var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;

      if (option === undefined) {
        option = "ally";
      } //Sound


      this.$refs.soundClick.play(); //Define

      var owner = this.source[option][payload.heroIndex];
      var skillIndex = owner.skill.findIndex(function (x) {
        return x.id === payload.skillId;
      });
      var config = {
        nameId: payload.nameId,
        skill: skillIndex,
        skillId: payload.skillId,
        heroIndex: payload.heroIndex,
        option: option
      };
      var skill = owner.skill[config.skill]; //Map Description

      var map = {
        name: skill.name,
        energy: {
          a: skill.energy.a,
          i: skill.energy.i,
          s: skill.energy.s,
          w: skill.energy.w,
          r: skill.energy.r,
          total: skill.energy.a + skill.energy.i + skill.energy.s + skill.energy.w + skill.energy.r
        },
        description: skill.description,
        classes: skill.classes,
        cooldown: skill.cooldown
      };
      var alt = skill.alt !== false ? skill.alt : false; //Buffer Description

      var state = this.state;
      state.description = {
        nameId: config.nameId,
        skill: config.skillId,
        heroIndex: config.heroIndex,
        map: map,
        alt: alt,
        option: option
      };
    },
    onStatus: function onStatus(payload) {
      console.log(payload);

      var status = _.concat(payload.onAttack, payload.onReceive, payload.onState, payload.onSelf);

      console.log(status);

      var group = _.groupBy(status, "nameId");

      console.log(group);

      var subgroup = _.toArray(group).map(function (x) {
        return _.toArray(_.groupBy(x, "skillIndex"));
      });

      var prep = subgroup.map(function (x) {
        return x[0];
      });
      var final = prep.map(function (x) {
        console.log(x[0]);
        var info = x[0];
        return {
          nameId: info.nameId,
          status: info.skillIndex,
          val: x
        };
      });
      console.log(prep);
      console.log(final);
      return final; // let subgroup = group.map(x => _.groupBy(x, "skillIndex"));
    },
    onGetImage: function onGetImage(payload, option) {
      if (option === "packet") {
        var index = this.source.ally.findIndex(function (x) {
          return x.name === payload.offense;
        });
        var nameId = this.source.ally[index].nameId;
        return "/assets/character/" + nameId.slice(0, -1) + "/skill" + (payload.skill + 1) + "/avatar.jpg";
      } else if (option === "char") {
        return "/assets/character/" + payload.nameId.slice(0, -1) + "/avatar.jpg";
      } else if (option === "skill") {
        return "/assets/character/" + payload.nameId.slice(0, -1) + "/skill" + (payload.skill + 1) + "/avatar.jpg";
      } else if (option === "status") {
        return "/assets/character/" + payload.nameId.slice(0, -1) + "/skill" + payload.skill + "/avatar.jpg";
      } else if (option === "targeting") {
        var _index = this.packet.findIndex(function (x) {
          return x.offense === payload.name;
        });

        var skillId = this.packet[_index].skillId;
        return "/assets/character/" + payload.nameId.slice(0, -1) + "/skill" + (skillId + 1) + "/avatar.jpg";
      }
    },
    targetingCue: function targetingCue(payload, nameId) {
      var name = payload;
      var index = this.packet.findIndex(function (x) {
        return x.offense === payload;
      });
      var packet = this.packet[index];
      var result = {
        name: name,
        skillIndex: packet.skill,
        skillId: packet.skillId,
        heroIndex: packet.heroIndex,
        target: packet.target
      };

      if (nameId) {
        result.nameId = nameId;
      }

      console.log(result);
      return result;
    },
    onHP: function onHP(hp) {
      if (hp > 70) {
        return "l--hp-full";
      } else if (hp <= 70 && hp >= 40) {
        return "l--hp-mid";
      } else {
        return "l--hp-low";
      }
    }
  }
});
"use strict";

function energyManagement(temporary, option) {
  var energy = temporary.energy ? temporary.energy : app.source.energy.ally;
  var skill = temporary.skillBind ? temporary.skillBind : app.source.ally[temporary.heroIndex].skill[temporary.skill].energy;
  var total = {
    energy: energy.a + energy.i + energy.s + energy.w,
    skill: skill.a + skill.i + skill.s + skill.w
  };

  if (option === "substract") {
    if (skill.a > 0) {
      energy.a -= skill.a;
      energy.r -= skill.a;
    }

    if (skill.i > 0) {
      energy.i -= skill.i;
      energy.r -= skill.i;
    }

    if (skill.s > 0) {
      energy.s -= skill.s;
      energy.r -= skill.s;
    }

    if (skill.w > 0) {
      energy.w -= skill.w;
      energy.r -= skill.w;
    }

    if (skill.r > 0) {
      energy.r -= skill.r;
      app.state.energy.random += skill.r;
    }
  } else if (option === "add") {
    if (skill.a > 0) {
      energy.a += skill.a;
      energy.r += skill.a;
    }

    if (skill.i > 0) {
      energy.i += skill.i;
      energy.r += skill.i;
    }

    if (skill.s > 0) {
      energy.s += skill.s;
      energy.r += skill.s;
    }

    if (skill.w > 0) {
      energy.w += skill.w;
      energy.r += skill.w;
    }

    if (skill.r > 0) {
      energy.r += skill.r;
      app.state.energy.random -= skill.r;
    }
  } else if (option === "check") {
    var active = true;

    if (total.energy >= total.skill) {
      var count = [true, true, true, true, true];

      if (skill.a >= 0) {
        count[0] = energy.a >= skill.a ? false : true;
      }

      if (skill.i >= 0) {
        count[1] = energy.i >= skill.i ? false : true;
      }

      if (skill.s >= 0) {
        count[2] = energy.s >= skill.s ? false : true;
      }

      if (skill.w >= 0) {
        count[3] = energy.w >= skill.w ? false : true;
      }

      if (skill.r >= 0) {
        count[4] = energy.r >= total.skill + skill.r ? false : true;
      }

      if (count.filter(function (x) {
        return x === false;
      }).length === 5) {
        active = false;
      } else {
        active = true;
      }
    }

    return active;
  }
}

function buttonManagement(payload, option) {
  //Target Button
  if (option !== "onSelf") {
    if (payload.aim === "enemy") {
      app.state.button.enemy.forEach(function (x) {
        //Define
        var skill = app.source.ally[payload.heroIndex].skill[payload.skill];
        var enemyStatus = app.source.enemy[x.index].status; //Invulnerability

        var state = enemyStatus.onState;
        var invulnerable = invulnerableManagement(state, skill); //Disable

        x.button = x.disabled || invulnerable ? true : !x.button; //Ignore

        var ignore = ignoreManagement(state, skill);
        console.log(ignore); //Prevent Invulnerability

        if (option === "onSkill" && enemyStatus.onState.some(function (x) {
          return x.type === "disableDrIv";
        }) && ignore === false) {
          console.log('hi');
          x.button = false;
        }

        console.log(x.button); //Marking

        if (payload.marking === true) {
          var skillName = skill.name;
          var marking = enemyStatus.onReceive.some(function (x) {
            return x.name === skillName;
          }) || enemyStatus.onState.some(function (x) {
            return x.name === skillName;
          });

          if (marking === true) {
            x.button = true;
          }
        }
      });
    } else if (payload.aim === "enemylock") {
      app.state.button.enemy.forEach(function (x) {
        //Define
        var skill = app.source.ally[payload.heroIndex].skill[payload.skill];
        var enemyStatus = app.source.enemy[x.index].status;
        var lock = enemyStatus.onState.some(function (x) {
          return x.type === "state" && x.info === skill.name;
        });

        if (lock === true) {
          //Invulnerability
          var state = enemyStatus.onState;
          var invulnerable = invulnerableManagement(state, skill); //Disable

          x.button = x.disabled || invulnerable ? true : !x.button; //Ignore

          var ignore = ignoreManagement(state, skill);
          console.log(invulnerable); //Prevent Invulnerability

          if (option === "onSkill" && enemyStatus.onState.some(function (x) {
            return x.type === "disableDrIv";
          }) && ignore === false) {
            x.button = false;
          } //Marking


          if (payload.marking === true) {
            var skillName = skill.name;
            var marking = enemyStatus.onReceive.some(function (x) {
              return x.name === skillName;
            }) || enemyStatus.onState.some(function (x) {
              return x.name === skillName;
            });

            if (marking === true) {
              x.button = true;
            }
          }
        }
      });
    } else if (payload.aim === "allenemy" || payload.aim === "randomenemy" || payload.aim === "allenemyallally") {
      app.state.button.enemy.forEach(function (x) {
        //Define
        var skill = app.source.ally[payload.heroIndex].skill[payload.skill];
        var enemyStatus = app.source.enemy[x.index].status; //Invulnerability

        var state = enemyStatus.onState;
        var invulnerable = invulnerableManagement(state, skill); //Disable

        x.button = x.disabled || invulnerable ? true : !x.button; //Prevent Invulnerability

        if (option === "onSkill" && enemyStatus.onState.some(function (x) {
          return x.type === "disableDrIv";
        })) {
          x.button = false;
        }
      });
    } else if (payload.aim === "ally" || payload.aim === "allally") {
      app.state.button.ally.forEach(function (x) {
        return x.button = x.disabled ? true : !x.button;
      });
    } else if (payload.aim === "otherally") {
      app.state.button.ally.forEach(function (x) {
        var name = app.state.button.ally[payload.heroIndex].name;

        if (x.name !== name) {
          x.button = x.disabled ? true : !x.button;
        }
      });
    } else if (payload.aim === "self") {
      var ally = app.state.button.ally[payload.heroIndex];
      ally.button = ally.disabled ? true : !ally.button;
    }
  } //Skill Button


  if (option === "onTarget") {
    console.log("onSkill");
    app.state.button.ally.forEach(function (x) {
      if (x.onSkill === false) {
        x.skill.forEach(function (s) {
          s.button = true;

          if (x.name === payload.offense && s.name === app.source.ally[payload.heroIndex].skill[payload.skill].name) {
            s.button = false;
          }
        });
      }
    });
  }

  if (option === "onCancel") {
    console.log("onCancel");
    app.state.button.ally.forEach(function (x) {
      if (x.onSkill === false || x.name === payload.offense) {
        x.skill.forEach(function (s) {
          s.button = s.disabled ? true : false;

          if (x.name === payload.offense && s.name === app.source.ally[payload.heroIndex].skill[payload.skill].name) {
            s.button = false;
          }
        });
      }
    });
  } else if (option === "onTarget") {
    console.log("onTarget");
    app.state.button.ally.forEach(function (x) {
      var index = app.packet.findIndex(function (s) {
        return s.offense === x.name;
      });

      if (index < 0) {
        x.skill.forEach(function (s) {
          s.button = s.disabled ? true : false;
        });
      }
    });
  } else if (option === "onSelf") {
    console.log("onSelf");
    app.state.button.ally[payload.heroIndex].skill.forEach(function (s) {
      s.button = s.disabled ? true : false;
    });
  } //Energy Management


  if (option !== "onSkill") {
    app.state.button.ally.forEach(function (x, xi) {
      if (x.onSkill === false && x.name !== payload.offense) {
        console.log(x.name);
        console.log(option);
        x.skill.forEach(function (s, si) {
          var energy = energyManagement({
            heroIndex: xi,
            skill: si
          }, "check");
          s.button = s.disabled || energy ? true : false;

          if (x.name === payload.offense && s.name === app.source.ally[payload.heroIndex].skill[payload.skill].name) {
            s.button = false;
          }
        });
      }

      if ((option === "onSelf" || option === "onCancel") && x.name === payload.offense) {
        x.skill.forEach(function (s, si) {
          var energy = energyManagement({
            heroIndex: xi,
            skill: si
          }, "check");
          s.button = s.disabled || energy ? true : false;
        });
      }
    });
  }
}

function stunManagement(onState, skill) {
  var stun = onState.map(function (x) {
    if (x.type === "stun") {
      var ignore = ignoreManagement(onState, x);

      var intersect = _.intersection(x.classes, skill.classes);

      var evaluate;

      if (x.info === "inclusive") {
        evaluate = intersect.length > 0 ? true : false;
      } else if (x.info === "declusive") {
        evaluate = intersect.length === 0 ? true : false;
      }

      if (evaluate && !ignore) {
        return true;
      } else {
        return false;
      }
    }
  });

  if (stun.filter(function (x) {
    return x === true;
  }).length > 0) {
    return true;
  } else {
    return false;
  }
}

function invulnerableManagement(onState, skill) {
  var invulnerable = onState.map(function (x) {
    if (x.type === "invulnerable") {
      var ignoreInvul = skill.ignoreInvul;

      var intersect = _.intersection(x.classes, skill.classes);

      var evaluate;

      if (x.info === "inclusive") {
        evaluate = intersect.length > 0 ? true : false;
      } else if (x.info === "declusive") {
        evaluate = intersect.length === 0 ? true : false;
      }

      if (evaluate && !ignoreInvul) {
        return true;
      } else {
        return false;
      }
    }
  });

  if (invulnerable.filter(function (x) {
    return x === true;
  }).length > 0) {
    return true;
  } else {
    return false;
  }
}

function ignoreManagement(onState, skill) {
  var ignore = onState.map(function (x) {
    if (x.type === "ignore") {
      var intersect = _.intersection(x.classes, skill.classes);

      var evaluate;

      if (x.info === "inclusive") {
        evaluate = intersect.length > 0 ? true : false;
      } else if (x.info === "declusive") {
        evaluate = intersect.length === 0 ? true : false;
      }

      if (evaluate) {
        return true;
      } else {
        return false;
      }
    }
  });

  if (ignore.filter(function (x) {
    return x === true;
  }).length > 0) {
    return true;
  } else {
    return false;
  }
}
"use strict";

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function vueBind(payload) {
  var username = getCookie("username");
  console.log(payload);
  var ally = payload.team.teamEven === username ? "teamEven" : "teamOdd";
  var enemy = payload.team.teamEven === username ? "teamOdd" : "teamEven";
  var turnVal = ally === "teamEven" ? 0 : 1;
  var myTurn = payload.turn % 2 === turnVal ? true : false;

  if (payload.team.teamEven !== username && payload.team.teamOdd !== username) {
    console.log("spectate");
    app.mode = "spectate";
    myTurn = false; // return;
  }

  if (myTurn === true) {
    app.$refs.soundStartTurn.play();
  } //Time


  var timeDiff = (Date.now() - payload.timestamp) / 1000;
  var timeCalc = Math.floor(45 - timeDiff);
  var remaining = 100 * (timeCalc / 45);
  console.log(payload.timestamp, timeDiff, timeCalc, remaining);

  if (remaining < 0) {
    remaining = 0;
  }

  app.state.timer.turn = remaining; // if (payload.winner.state === true && payload.winner.name === username) {
  // } else if (
  //   payload.winner.state === true &&
  //   payload.winner.name !== username
  // ) {
  //   app.$refs.soundLose.play();
  // }

  var store = {
    energy: {
      ally: payload.energy[ally],
      enemy: payload.energy[enemy]
    },
    ally: payload[ally].map(function (x) {
      return _objectSpread({}, x, {
        indicator: statusView(x.name, x.status, turnVal)
      });
    }),
    enemy: payload[enemy].map(function (x) {
      return _objectSpread({}, x, {
        skill: x.skill.sort(function (a, b) {
          return a.id - b.id;
        }),
        indicator: statusView(x.name, x.status, turnVal)
      });
    }),
    turn: payload.turn,
    myTurn: myTurn,
    turnVal: turnVal,
    room: payload.room,
    meta: {
      myName: payload.team[ally],
      theirName: payload.team[enemy]
    },
    timestamp: payload.timestamp
  };
  store.energy.ally.r = store.energy.ally.a + store.energy.ally.i + store.energy.ally.s + store.energy.ally.w;
  console.log(store);
  var button = {
    ally: store.ally.map(function (x) {
      // let disabled = x.status.onState.findIndex(x => x.type === 'stun') > -1 || x.hp <= 0 ? true : false
      var disabled = x.hp <= 0 ? true : false; // let stun = x.status.onState.some(x => x.type === "stun") ? true : false;

      return {
        name: x.name,
        button: true,
        onSkill: false,
        disabled: disabled,
        skill: x.skill.map(function (s) {
          // console.log(s.type);
          var energy = energyManagement({
            energy: store.energy.ally,
            skillBind: s.energy
          }, "check");
          var stun = stunManagement(x.status.onState, s); // let disableDrVr =
          //   s.type === "invulnerable" &&
          //   x.status.onState.some(x => x.type === "disableDrIv")
          //     ? true
          //     : false;

          var disabled = stun || s.required || s.state === "cooldown" || myTurn === false || x.hp <= 0 ? true : false;
          return {
            name: s.name,
            disabled: disabled,
            button: disabled || energy ? true : false
          };
        })
      };
    }),
    enemy: store.enemy.map(function (x, i) {
      // let disabled =
      //   x.status.onState.some(x => x.type === "invulnerable") || x.hp <= 0
      //     ? true
      //     : false;
      var disabled = x.hp <= 0 ? true : false;
      return {
        name: x.name,
        index: i,
        disabled: disabled,
        button: true
      };
    })
  };
  app.source = store;
  app.state.button = button;
  app.state.winner = payload.winner;
  app.state.exchange.modal = false;
}

function statusView(name, payload, turnVal) {
  console.log(name.slice(-1), payload);

  var status = _.concat(payload.onAttack, payload.onReceive, payload.onState, payload.onSelf);

  console.log("invisible", turnVal, name.slice(-1));
  status = status.filter(function (x) {
    return x.isInvisible === false || x.isInvisible !== false && Number(x.nameId.slice(-1)) === turnVal;
  }); // if (turnVal === Number(name.slice(-1))) {
  //   status = status.filter(
  //     x => x.isInvisible === false || x.isInvisible !== false && Number(x.nameId.slice(-1)) === turnVal
  //   );
  // } else {
  //   status = status.filter(
  //     x => x.isInvisible === false || x.isInvisible !== false && Number(x.nameId.slice(-1)) === turnVal
  //   );
  // }

  var groupByNameId = _.groupBy(status, "nameId");

  var valuesByNameId = _.values(groupByNameId);

  var groupBySkillIndex = valuesByNameId.map(function (x) {
    return _.groupBy(x, "skillIndex");
  });

  var valuesBySkillIndex = _.values(groupBySkillIndex);

  var concatValues = [];
  valuesBySkillIndex.forEach(function (x) {
    concatValues = concatValues.concat(_.values(x));
  });
  var final = concatValues.map(function (x) {
    var info = x[0];
    return {
      name: info.name,
      nameId: info.nameId,
      skillIndex: info.skillIndex,
      active: info.active,
      val: x
    };
  });
  return final;
}
"use strict";

function initiate() {
  var url = window.location.href.split("/");
  var room = url[url.length - 1];

  if (room !== "") {
    socket.emit("initiate", {
      room: room
    });
    chat.emit("gameInitiate", {
      room: room
    });
    chat.emit("lobbyInitiate");
  } else {// window.location.replace('/');
  }
}

initiate();
setInterval(function () {
  if (app.source.turn == undefined || app.state.winner.state !== false) {
    return;
  }

  if (app.state.timer.turn > 0) {
    var timer = app.state.timer.turn - 2.2;

    if (timer < 0) {
      timer = 0;
    }

    app.state.timer.turn = timer;
  } else if (app.state.timer.turn <= 0 && app.source.myTurn === true) {
    var timeDiff = (Date.now() - app.source.timestamp) / 1000;
    var timeCalc = 45 - timeDiff;
    var remaining = 100 * (timeCalc / 45); // console.log(app.source.timestamp, timeDiff, timeCalc, remaining);

    if (remaining <= 0 && app.state.timer.turn <= 0 && app.source.myTurn === true) {
      var payload = {
        energy: {
          a: 0,
          i: 0,
          s: 0,
          w: 0
        },
        packet: []
      };
      app.onDone(payload);
      app.source.myTurn = false;
    }
  }
}, 1000);

window.onfocus = function () {
  document.title = "Anime Rumble";
};

function scrollChat() {
  var container = app.$el.querySelector("#chat");
  container.scrollTop = container.scrollHeight;
}
"use strict";

socket.on("apply", function (payload) {
  document.title = "(!) Anime Rumble";
  vueBind(payload);
});
socket.on("noMatch", function (payload) {
  console.log("none");
  window.location.replace("/");
});
chat.on("chat", function (payload) {
  if (payload.channel === "ingame") {
    app.chat.push(payload.message);

    if (app.chatChannel !== "ingame") {
      app.chatNotif.ingame = true;
    } else {
      scrollChat();
    }
  } else if (payload.channel === "lobby") {
    app.lobbychat.push(payload.message);

    if (app.chatChannel !== "lobby") {
      app.chatNotif.lobby = true;
    } else {
      scrollChat();
    }
  }
});
chat.on("gameInitiate", function (payload) {
  app.chat = payload;
  setTimeout(function () {
    scrollChat();
  }, 100);
});
chat.on("lobbyInitiate", function (payload) {
  app.lobbychat = payload;
});
"use strict";

function getParameterName(name, url) {
  if (!url) url = window.location.href;
  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return "";
  return decodeURIComponent(results[2].replace(/\+/g, " "));
}

var setCookie = function setCookie(name, value) {
  var days = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 7;
  var path = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "/";
  var expires = new Date(Date.now() + days * 864e5).toGMTString();
  document.cookie = name + "=" + encodeURIComponent(value) + "; expires=" + expires + "; path=" + path;
};

var getCookie = function getCookie(name) {
  return document.cookie.split("; ").reduce(function (r, v) {
    var parts = v.split("=");
    return parts[0] === name ? decodeURIComponent(parts[1]) : r;
  }, "");
};

var deleteCookie = function deleteCookie(name, path) {
  setCookie(name, "", -1, path);
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwLmpzIiwidnVlLmpzIiwibWFuYWdlbWVudC5qcyIsInJlbmRlcmVyLmpzIiwiZ2VuZXJhbC5qcyIsInNvY2tldC5qcyIsImhlbHBlci5qcyJdLCJuYW1lcyI6WyJzb2NrZXQiLCJpbyIsImNoYXQiLCJWdWUiLCJ1c2UiLCJWVG9vbHRpcCIsImFwcCIsImVsIiwiZGF0YSIsIm1vZGUiLCJsb2JieWNoYXQiLCJjaGF0U2VuZCIsImNoYXRDaGFubmVsIiwiY2hhdE5vdGlmIiwibG9iYnkiLCJpbmdhbWUiLCJzb3VyY2UiLCJlbmVyZ3kiLCJhbGx5IiwibWV0YSIsInBhY2tldCIsInN0YXRlIiwic2tpbGwiLCJvZmZlbnNlIiwidGFyZ2V0IiwiYWltIiwidGltZXIiLCJ0dXJuIiwib25Ta2lsbCIsImJ1dHRvbiIsImRlc2NyaXB0aW9uIiwid2lubmVyIiwibmFtZSIsIm1vZGFsIiwicmFuZG9tIiwiZXhjaGFuZ2UiLCJ1c2VkIiwidmFsIiwic2hvd01vZGFsIiwibWV0aG9kcyIsIm9uU3VycmVuZGVyIiwiY29uc29sZSIsImxvZyIsImVtaXQiLCJyb29tIiwib25DaGF0IiwiY2hhbm5lbCIsIm1lc3NhZ2UiLCJzY3JvbGxDaGF0Iiwic2V0VGltZW91dCIsIm9uRXhjaGFuZ2UiLCJlIiwiJHJlZnMiLCJzb3VuZENsaWNrIiwicGxheSIsInIiLCJjb3N0IiwiZm9yRWFjaCIsIngiLCJ4aSIsInMiLCJzaSIsImVuZXJneU1hbmFnZW1lbnQiLCJoZXJvSW5kZXgiLCJkaXNhYmxlZCIsImJ1dHRvbk1hbmFnZW1lbnQiLCJza2lsbElkIiwib25Eb25lIiwibXlUdXJuIiwic291bmRFbmRUdXJuIiwiZmlsdGVyIiwidW5zaGlmdCIsIm1zZyIsInBheWxvYWQiLCJtYXJraW5nIiwic2tpbGxJbmRleCIsInRlbXBvcmFyeSIsImlzT25Ta2lsbCIsIm9uVGFyZ2V0IiwiZW5lbXkiLCJtYXAiLCJjb25jYXQiLCJwdXNoIiwib25BdHRhY2siLCJvbkRlc2NyaXB0aW9uIiwib3B0aW9uIiwidW5kZWZpbmVkIiwib3duZXIiLCJmaW5kSW5kZXgiLCJpZCIsImNvbmZpZyIsIm5hbWVJZCIsImEiLCJpIiwidyIsInRvdGFsIiwiY2xhc3NlcyIsImNvb2xkb3duIiwiYWx0Iiwib25TdGF0dXMiLCJzdGF0dXMiLCJfIiwib25SZWNlaXZlIiwib25TdGF0ZSIsIm9uU2VsZiIsImdyb3VwIiwiZ3JvdXBCeSIsInN1Ymdyb3VwIiwidG9BcnJheSIsInByZXAiLCJmaW5hbCIsImluZm8iLCJvbkdldEltYWdlIiwiaW5kZXgiLCJzbGljZSIsInRhcmdldGluZ0N1ZSIsInJlc3VsdCIsIm9uSFAiLCJocCIsInNraWxsQmluZCIsImFjdGl2ZSIsImNvdW50IiwibGVuZ3RoIiwiZW5lbXlTdGF0dXMiLCJpbnZ1bG5lcmFibGUiLCJpbnZ1bG5lcmFibGVNYW5hZ2VtZW50IiwiaWdub3JlIiwiaWdub3JlTWFuYWdlbWVudCIsInNvbWUiLCJ0eXBlIiwic2tpbGxOYW1lIiwibG9jayIsInN0dW5NYW5hZ2VtZW50Iiwic3R1biIsImludGVyc2VjdCIsImludGVyc2VjdGlvbiIsImV2YWx1YXRlIiwiaWdub3JlSW52dWwiLCJ2dWVCaW5kIiwidXNlcm5hbWUiLCJnZXRDb29raWUiLCJ0ZWFtIiwidGVhbUV2ZW4iLCJ0dXJuVmFsIiwidGVhbU9kZCIsInNvdW5kU3RhcnRUdXJuIiwidGltZURpZmYiLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwidGltZUNhbGMiLCJNYXRoIiwiZmxvb3IiLCJyZW1haW5pbmciLCJzdG9yZSIsImluZGljYXRvciIsInN0YXR1c1ZpZXciLCJzb3J0IiwiYiIsIm15TmFtZSIsInRoZWlyTmFtZSIsInJlcXVpcmVkIiwiaXNJbnZpc2libGUiLCJOdW1iZXIiLCJncm91cEJ5TmFtZUlkIiwidmFsdWVzQnlOYW1lSWQiLCJ2YWx1ZXMiLCJncm91cEJ5U2tpbGxJbmRleCIsInZhbHVlc0J5U2tpbGxJbmRleCIsImNvbmNhdFZhbHVlcyIsImluaXRpYXRlIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwic3BsaXQiLCJzZXRJbnRlcnZhbCIsIm9uZm9jdXMiLCJkb2N1bWVudCIsInRpdGxlIiwiY29udGFpbmVyIiwiJGVsIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsIm9uIiwicmVwbGFjZSIsImdldFBhcmFtZXRlck5hbWUiLCJyZWdleCIsIlJlZ0V4cCIsInJlc3VsdHMiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic2V0Q29va2llIiwidmFsdWUiLCJkYXlzIiwicGF0aCIsImV4cGlyZXMiLCJ0b0dNVFN0cmluZyIsImNvb2tpZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlZHVjZSIsInYiLCJwYXJ0cyIsImRlbGV0ZUNvb2tpZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxTQUFTQyxHQUFHLE9BQUgsQ0FBYjtBQUNBLElBQUlDLE9BQU9ELEdBQUcsT0FBSCxDQUFYOzs7QUNEQUUsSUFBSUMsR0FBSixDQUFRQyxRQUFSO0FBQ0EsSUFBSUMsTUFBTSxJQUFJSCxHQUFKLENBQVE7QUFDaEJJLE1BQUksTUFEWTtBQUVoQkMsUUFBTTtBQUNKQyxVQUFNLE1BREY7QUFFSlAsVUFBTSxFQUZGO0FBR0pRLGVBQVcsRUFIUDtBQUlKQyxjQUFVLEVBSk47QUFLSkMsaUJBQWEsUUFMVDtBQU1KQyxlQUFXO0FBQ1RDLGFBQU8sS0FERTtBQUVUQyxjQUFRO0FBRkMsS0FOUDtBQVVKQyxZQUFRO0FBQ05DLGNBQVE7QUFDTkMsY0FBTTtBQURBLE9BREY7QUFJTkMsWUFBTTtBQUpBLEtBVko7QUFnQkpDLFlBQVEsRUFoQko7QUFpQkpDLFdBQU87QUFDTEMsYUFBTztBQUNMQyxpQkFBUyxJQURKO0FBRUxELGVBQU8sSUFGRjtBQUdMRSxnQkFBUSxJQUhIO0FBSUxDLGFBQUs7QUFKQSxPQURGO0FBT0xDLGFBQU87QUFDTEMsY0FBTTtBQURELE9BUEY7QUFVTEMsZUFBUyxLQVZKO0FBV0xDLGNBQVEsRUFYSDtBQVlMQyxtQkFB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RUFBRTNCLEtBQUYsQ0FBUSxHQUFSLENBQWQ7QUFDQSxXQUFPNEIsTUFBTSxDQUFOLE1BQWEzSyxJQUFiLEdBQW9CZ0ssbUJBQW1CVyxNQUFNLENBQU4sQ0FBbkIsQ0FBcEIsR0FBbURwSixDQUExRDtBQUNELEdBSE0sRUFHSixFQUhJLENBQVA7QUFJRCxDQUxEOztBQU9BLElBQU1xSixlQUFlLFNBQWZBLFlBQWUsQ0FBQzVLLElBQUQsRUFBT29LLElBQVAsRUFBZ0I7QUFDbkNILFlBQVVqSyxJQUFWLEVBQWdCLEVBQWhCLEVBQW9CLENBQUMsQ0FBckIsRUFBd0JvSyxJQUF4QjtBQUNELENBRkQiLCJmaWxlIjoiZ2FtZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgc29ja2V0ID0gaW8oXCIvZ2FtZVwiKTtcbmxldCBjaGF0ID0gaW8oXCIvY2hhdFwiKTtcbiIsIlZ1ZS51c2UoVlRvb2x0aXApO1xubGV0IGFwcCA9IG5ldyBWdWUoe1xuICBlbDogXCIjYXBwXCIsXG4gIGRhdGE6IHtcbiAgICBtb2RlOiBcImdhbWVcIixcbiAgICBjaGF0OiBbXSxcbiAgICBsb2JieWNoYXQ6IFtdLFxuICAgIGNoYXRTZW5kOiBcIlwiLFxuICAgIGNoYXRDaGFubmVsOiBcImluZ2FtZVwiLFxuICAgIGNoYXROb3RpZjoge1xuICAgICAgbG9iYnk6IGZhbHNlLFxuICAgICAgaW5nYW1lOiBmYWxzZVxuICAgIH0sXG4gICAgc291cmNlOiB7XG4gICAgICBlbmVyZ3k6IHtcbiAgICAgICAgYWxseToge31cbiAgICAgIH0sXG4gICAgICBtZXRhOiB7fVxuICAgIH0sXG4gICAgcGFja2V0OiBbXSxcbiAgICBzdGF0ZToge1xuICAgICAgc2tpbGw6IHtcbiAgICAgICAgb2ZmZW5zZTogbnVsbCxcbiAgICAgICAgc2tpbGw6IG51bGwsXG4gICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgYWltOiBudWxsXG4gICAgICB9LFxuICAgICAgdGltZXI6IHtcbiAgICAgICAgdHVybjogMTAwXG4gICAgICB9LFxuICAgICAgb25Ta2lsbDogZmFsc2UsXG4gICAgICBidXR0b246IHt9LFxuICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICB3aW5uZXI6IHtcbiAgICAgICAgc3RhdGU6IGZhbHNlLFxuICAgICAgICBuYW1lOiBcIlwiXG4gICAgICB9LFxuICAgICAgZW5lcmd5OiB7XG4gICAgICAgIG1vZGFsOiBmYWxzZSxcbiAgICAgICAgcmFuZG9tOiAwXG4gICAgICB9LFxuICAgICAgZXhjaGFuZ2U6IHtcbiAgICAgICAgbW9kYWw6IGZhbHNlLFxuICAgICAgICB1c2VkOiBmYWxzZSxcbiAgICAgICAgZW5lcmd5OiB7fSxcbiAgICAgICAgdmFsOiBcIlwiXG4gICAgICB9XG4gICAgfSxcbiAgICBzaG93TW9kYWw6IHRydWVcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIG9uU3VycmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwic3VycmVuZGVyXCIpO1xuICAgICAgc29ja2V0LmVtaXQoXCJzdXJyZW5kZXJcIiwgeyByb29tOiB0aGlzLnNvdXJjZS5yb29tIH0pO1xuICAgIH0sXG4gICAgb25DaGF0OiBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBjaGFubmVsID0gdGhpcy5jaGF0Q2hhbm5lbCA9PT0gXCJpbmdhbWVcIiA/IFwiaW5nYW1lXCIgOiBcImxvYmJ5XCI7XG5cbiAgICAgIGxldCBwYWNrZXQgPSB7XG4gICAgICAgIGNoYW5uZWw6IGNoYW5uZWwsXG4gICAgICAgIHJvb206IHRoaXMuc291cmNlLnJvb20sXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMuY2hhdFNlbmRcbiAgICAgIH07XG4gICAgICBjaGF0LmVtaXQoXCJjaGF0XCIsIHBhY2tldCk7XG4gICAgICB0aGlzLmNoYXRTZW5kID0gXCJcIjtcbiAgICB9LFxuICAgIHNjcm9sbENoYXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNjcm9sbENoYXQoKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSxcbiAgICBvbkV4Y2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgICAvL1NvdW5kXG4gICAgICB0aGlzLiRyZWZzLnNvdW5kQ2xpY2sucGxheSgpO1xuXG4gICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgdGhpcy5zb3VyY2UuZW5lcmd5LmFsbHkgPSBlLmVuZXJneTtcbiAgICAgIHRoaXMuc291cmNlLmVuZXJneS5hbGx5LnIgPVxuICAgICAgICB0aGlzLnNvdXJjZS5lbmVyZ3kuYWxseS5yIC0gdGhpcy5zdGF0ZS5lbmVyZ3kucmFuZG9tO1xuICAgICAgc3RhdGUuZXhjaGFuZ2UuZW5lcmd5ID0gZS5jb3N0O1xuICAgICAgc3RhdGUuZXhjaGFuZ2UubW9kYWwgPSBmYWxzZTtcbiAgICAgIHN0YXRlLmV4Y2hhbmdlLnVzZWQgPSB0cnVlO1xuICAgICAgc3RhdGUuZXhjaGFuZ2UudmFsID0gZS5leGNoYW5nZTtcblxuICAgICAgc3RhdGUuYnV0dG9uLmFsbHkuZm9yRWFjaCgoeCwgeGkpID0+IHtcbiAgICAgICAgaWYgKHgub25Ta2lsbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh4Lm5hbWUpO1xuICAgICAgICAgIHguc2tpbGwuZm9yRWFjaCgocywgc2kpID0+IHtcbiAgICAgICAgICAgIGxldCBlbmVyZ3kgPSBlbmVyZ3lNYW5hZ2VtZW50KFxuICAgICAgICAgICAgICB7IGhlcm9JbmRleDogeGksIHNraWxsOiBzaSB9LFxuICAgICAgICAgICAgICBcImNoZWNrXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzLmJ1dHRvbiA9IHMuZGlzYWJsZWQgfHwgZW5lcmd5ID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZW5lcmd5LCBzLmRpc2FibGVkLCBzLmJ1dHRvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvL0NsZWFuIFNraWxsIEJ1ZmZlclxuICAgICAgaWYgKHN0YXRlLnNraWxsLm9mZmVuc2UgIT09IG51bGwgJiYgc3RhdGUuc2tpbGwudGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgIC8vU3dpdGNoIENob2ljZVxuICAgICAgICAvL0J1dHRvbiBNYW5hZ2VtZW50XG4gICAgICAgIGJ1dHRvbk1hbmFnZW1lbnQoc3RhdGUuc2tpbGwsIFwib25DYW5jZWxcIik7XG4gICAgICAgIC8vQ2xlYW4gQnVmZmVyXG4gICAgICAgIHN0YXRlLnNraWxsID0ge1xuICAgICAgICAgIG9mZmVuc2U6IG51bGwsXG4gICAgICAgICAgc2tpbGw6IG51bGwsXG4gICAgICAgICAgc2tpbGxJZDogbnVsbCxcbiAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgYWltOiBudWxsLFxuICAgICAgICAgIGhlcm9JbmRleDogbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgb25Eb25lOiBmdW5jdGlvbihlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgIGFwcC5zb3VyY2UubXlUdXJuID0gZmFsc2U7XG4gICAgICAvL1NvdW5kXG4gICAgICB0aGlzLiRyZWZzLnNvdW5kRW5kVHVybi5wbGF5KCk7XG5cbiAgICAgIC8vRGVmaW5lXG4gICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgbGV0IHBhY2tldCA9IGUucGFja2V0O1xuXG4gICAgICAvL09yZ2FuaXplXG4gICAgICBzdGF0ZS5lbmVyZ3kubW9kYWwgPSBmYWxzZTtcbiAgICAgIHBhY2tldCA9IHBhY2tldC5maWx0ZXIoXG4gICAgICAgIHggPT5cbiAgICAgICAgICB4LnNraWxsICE9PSBudWxsICYmXG4gICAgICAgICAgeC5vZmZlbnNlICE9PSBudWxsICYmXG4gICAgICAgICAgeC50YXJnZXQgIT09IG51bGwgJiZcbiAgICAgICAgICB4LmFpbSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHguaGVyb0luZGV4ICE9PSBudWxsXG4gICAgICApO1xuICAgICAgcGFja2V0LnVuc2hpZnQoZS5lbmVyZ3kpO1xuICAgICAgaWYgKHN0YXRlLmV4Y2hhbmdlLnVzZWQgPT09IHRydWUpIHtcbiAgICAgICAgcGFja2V0LnVuc2hpZnQoXG4gICAgICAgICAgeyBtc2c6IFwiZXhjaGFuZ2VcIiwgdmFsOiBzdGF0ZS5leGNoYW5nZS52YWwgfSxcbiAgICAgICAgICBzdGF0ZS5leGNoYW5nZS5lbmVyZ3lcbiAgICAgICAgKTtcbiAgICAgICAgc3RhdGUuZXhjaGFuZ2UudXNlZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvL1NlbmRcbiAgICAgIHNvY2tldC5lbWl0KFwic2VxdWVuY2VcIiwge1xuICAgICAgICBwYWNrZXQ6IHBhY2tldCxcbiAgICAgICAgcm9vbTogdGhpcy5zb3VyY2Uucm9vbVxuICAgICAgfSk7XG5cbiAgICAgIC8vUmVzZXRcbiAgICAgIHN0YXRlLmVuZXJneS5yYW5kb20gPSAwO1xuICAgICAgdGhpcy5wYWNrZXQgPSBbXTtcbiAgICAgIHN0YXRlLnNraWxsID0ge1xuICAgICAgICBvZmZlbnNlOiBudWxsLFxuICAgICAgICBza2lsbDogbnVsbCxcbiAgICAgICAgc2tpbGxJZDogbnVsbCxcbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICBhaW06IG51bGwsXG4gICAgICAgIGhlcm9JbmRleDogbnVsbFxuICAgICAgfTtcbiAgICB9LFxuICAgIG9uU2tpbGw6IGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICAgIC8vRGVmaW5lIGFuZCBTd2l0Y2ggU3RhdGVcbiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICBsZXQgbWFya2luZyA9IHRoaXMuc291cmNlLmFsbHlbcGF5bG9hZC5oZXJvSW5kZXhdLnNraWxsW1xuICAgICAgICBwYXlsb2FkLnNraWxsSW5kZXhcbiAgICAgIF0ubWFya2luZztcbiAgICAgIGxldCB0ZW1wb3JhcnkgPSB7XG4gICAgICAgIG9mZmVuc2U6IHBheWxvYWQubmFtZSxcbiAgICAgICAgc2tpbGw6IHBheWxvYWQuc2tpbGxJbmRleCxcbiAgICAgICAgc2tpbGxJZDogcGF5bG9hZC5za2lsbElkLFxuICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgIGFpbTogcGF5bG9hZC50YXJnZXQsXG4gICAgICAgIGhlcm9JbmRleDogcGF5bG9hZC5oZXJvSW5kZXgsXG4gICAgICAgIG1hcmtpbmc6IG1hcmtpbmdcbiAgICAgIH07XG5cbiAgICAgIC8vSXMgU2tpbGwgQ2hvc2VuP1xuICAgICAgbGV0IGlzT25Ta2lsbCA9IHN0YXRlLmJ1dHRvbi5hbGx5W3RlbXBvcmFyeS5oZXJvSW5kZXhdLm9uU2tpbGw7XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXNPblNraWxsID09PSBmYWxzZSAmJlxuICAgICAgICBzdGF0ZS5za2lsbC5vZmZlbnNlID09PSBudWxsICYmXG4gICAgICAgIHN0YXRlLnNraWxsLnRhcmdldCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIC8vRmlyc3QgQ2hvaWNlXG4gICAgICAgIC8vQnVmZmVyIFNraWxsXG4gICAgICAgIHN0YXRlLnNraWxsID0gdGVtcG9yYXJ5O1xuICAgICAgICAvL0J1dHRvbiBNYW5hZ2VtZW50XG4gICAgICAgIGJ1dHRvbk1hbmFnZW1lbnQodGVtcG9yYXJ5LCBcIm9uU2tpbGxcIik7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBpc09uU2tpbGwgPT09IGZhbHNlICYmXG4gICAgICAgIHN0YXRlLnNraWxsLm9mZmVuc2UgIT09IG51bGwgJiZcbiAgICAgICAgc3RhdGUuc2tpbGwudGFyZ2V0ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgLy9Td2l0Y2ggQ2hvaWNlXG4gICAgICAgIC8vQnV0dG9uIE1hbmFnZW1lbnRcbiAgICAgICAgYnV0dG9uTWFuYWdlbWVudChzdGF0ZS5za2lsbCwgXCJvbkNhbmNlbFwiKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgYnV0dG9uTWFuYWdlbWVudCh0ZW1wb3JhcnksIFwib25Ta2lsbFwiKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgLy9CdWZmZXIgU2tpbGxcbiAgICAgICAgc3RhdGUuc2tpbGwgPSB0ZW1wb3Jhcnk7XG4gICAgICB9IGVsc2UgaWYgKGlzT25Ta2lsbCA9PT0gdHJ1ZSkge1xuICAgICAgICAvL0NhbmNlbCBDaG9pY2VcbiAgICAgICAgZW5lcmd5TWFuYWdlbWVudCh0ZW1wb3JhcnksIFwiYWRkXCIpO1xuICAgICAgICAvL0J1dHRvbiBNYW5hZ2VtZW50XG4gICAgICAgIGJ1dHRvbk1hbmFnZW1lbnQoc3RhdGUuc2tpbGwsIFwib25DYW5jZWxcIik7XG4gICAgICAgIGJ1dHRvbk1hbmFnZW1lbnQodGVtcG9yYXJ5LCBcIm9uU2VsZlwiKTtcbiAgICAgICAgdGhpcy5wYWNrZXQgPSB0aGlzLnBhY2tldC5maWx0ZXIoeCA9PiB4Lm9mZmVuc2UgIT09IHRlbXBvcmFyeS5vZmZlbnNlKTtcbiAgICAgICAgLy9DbGVhbiBTa2lsbCBCdWZmZXJcbiAgICAgICAgc3RhdGUuc2tpbGwgPSB7XG4gICAgICAgICAgb2ZmZW5zZTogbnVsbCxcbiAgICAgICAgICBza2lsbDogbnVsbCxcbiAgICAgICAgICBza2lsbElkOiBudWxsLFxuICAgICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgICBhaW06IG51bGwsXG4gICAgICAgICAgaGVyb0luZGV4OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIC8vU3RhdGUgTWFuYWdlbWVudFxuICAgICAgICBzdGF0ZS5idXR0b24uYWxseVt0ZW1wb3JhcnkuaGVyb0luZGV4XS5vblNraWxsID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBvblRhcmdldDogZnVuY3Rpb24ocGF5bG9hZCkge1xuICAgICAgLy9Tb3VuZFxuICAgICAgdGhpcy4kcmVmcy5zb3VuZENsaWNrLnBsYXkoKTtcblxuICAgICAgLy9EZWZpbmUgU3RhdGVcbiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgIC8vQnVmZmVyIFNraWxsXG4gICAgICBpZiAoc3RhdGUuc2tpbGwuYWltID09PSBcImFsbGVuZW15XCIgfHwgc3RhdGUuc2tpbGwuYWltID09PSBcInJhbmRvbWVuZW15XCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coc3RhdGUuYnV0dG9uLmVuZW15KTtcbiAgICAgICAgc3RhdGUuc2tpbGwudGFyZ2V0ID0gc3RhdGUuYnV0dG9uLmVuZW15XG4gICAgICAgICAgLmZpbHRlcih4ID0+IHguYnV0dG9uICE9PSB0cnVlICYmIHgubmFtZSAhPT0gcGF5bG9hZC5uYW1lKVxuICAgICAgICAgIC5tYXAoeCA9PiB4Lm5hbWUpO1xuICAgICAgICBzdGF0ZS5za2lsbC50YXJnZXQudW5zaGlmdChwYXlsb2FkLm5hbWUpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5za2lsbC5haW0gPT09IFwiYWxsYWxseVwiKSB7XG4gICAgICAgIHN0YXRlLnNraWxsLnRhcmdldCA9IHN0YXRlLmJ1dHRvbi5hbGx5Lm1hcCh4ID0+IHgubmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLnNraWxsLmFpbSA9PT0gXCJhbGxlbmVteWFsbGFsbHlcIikge1xuICAgICAgICBzdGF0ZS5za2lsbC50YXJnZXQgPSBzdGF0ZS5idXR0b24uZW5lbXlcbiAgICAgICAgICAuZmlsdGVyKHggPT4geC5idXR0b24gIT09IHRydWUgJiYgeC5uYW1lICE9PSBwYXlsb2FkLm5hbWUpXG4gICAgICAgICAgLm1hcCh4ID0+IHgubmFtZSk7XG4gICAgICAgIHN0YXRlLnNraWxsLnRhcmdldC51bnNoaWZ0KHBheWxvYWQubmFtZSk7XG4gICAgICAgIGxldCBhbGx5ID0gc3RhdGUuYnV0dG9uLmFsbHkubWFwKHggPT4geC5uYW1lKTtcbiAgICAgICAgc3RhdGUuc2tpbGwudGFyZ2V0ID0gc3RhdGUuc2tpbGwudGFyZ2V0LmNvbmNhdChhbGx5KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuc2tpbGwuYWltID09PSBcIm90aGVyYWxseVwiKSB7XG4gICAgICAgIHN0YXRlLnNraWxsLnRhcmdldCA9IHN0YXRlLmJ1dHRvbi5hbGx5XG4gICAgICAgICAgLmZpbHRlcih4ID0+IHgubmFtZSAhPT0gc3RhdGUuc2tpbGwub2ZmZW5zZSlcbiAgICAgICAgICAubWFwKHggPT4geC5uYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnNraWxsLnRhcmdldCA9IFtwYXlsb2FkLm5hbWVdO1xuICAgICAgfVxuICAgICAgLy9SZWdpc3RlciBTa2lsbFxuICAgICAgdGhpcy5wYWNrZXQucHVzaCh0aGlzLnN0YXRlLnNraWxsKTtcblxuICAgICAgLy9FbmVyZ3kgTWFuYWdlbWVudFxuICAgICAgZW5lcmd5TWFuYWdlbWVudChzdGF0ZS5za2lsbCwgXCJzdWJzdHJhY3RcIik7XG4gICAgICAvL0J1dHRvbiBNYW5hZ2VtZW50XG4gICAgICAvLyBidXR0b25NYW5hZ2VtZW50KHN0YXRlLnNraWxsLCBcIm9uU2tpbGxcIik7XG4gICAgICBidXR0b25NYW5hZ2VtZW50KHN0YXRlLnNraWxsLCBcIm9uVGFyZ2V0XCIpO1xuICAgICAgLy9TdGF0ZSBNYW5hZ2VtZW50XG4gICAgICBzdGF0ZS5idXR0b24uYWxseVtzdGF0ZS5za2lsbC5oZXJvSW5kZXhdLm9uU2tpbGwgPSB0cnVlO1xuXG4gICAgICAvL0NsZWFuIFNraWxsIEJ1ZmZlclxuICAgICAgc3RhdGUuc2tpbGwgPSB7XG4gICAgICAgIG9mZmVuc2U6IG51bGwsXG4gICAgICAgIHNraWxsOiBudWxsLFxuICAgICAgICBza2lsbElkOiBudWxsLFxuICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgIGFpbTogbnVsbCxcbiAgICAgICAgaGVyb0luZGV4OiBudWxsXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25BdHRhY2s6IGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICAgIC8vU291bmRcbiAgICAgIHRoaXMuJHJlZnMuc291bmRDbGljay5wbGF5KCk7XG5cbiAgICAgIHRoaXMuc3RhdGUuZW5lcmd5Lm1vZGFsID0gdHJ1ZTtcbiAgICB9LFxuICAgIG9uRGVzY3JpcHRpb246IGZ1bmN0aW9uKHBheWxvYWQsIG9wdGlvbiA9IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKG9wdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdGlvbiA9IFwiYWxseVwiO1xuICAgICAgfVxuXG4gICAgICAvL1NvdW5kXG4gICAgICB0aGlzLiRyZWZzLnNvdW5kQ2xpY2sucGxheSgpO1xuICAgICAgLy9EZWZpbmVcbiAgICAgIGxldCBvd25lciA9IHRoaXMuc291cmNlW29wdGlvbl1bcGF5bG9hZC5oZXJvSW5kZXhdO1xuICAgICAgbGV0IHNraWxsSW5kZXggPSBvd25lci5za2lsbC5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBwYXlsb2FkLnNraWxsSWQpO1xuICAgICAgbGV0IGNvbmZpZyA9IHtcbiAgICAgICAgbmFtZUlkOiBwYXlsb2FkLm5hbWVJZCxcbiAgICAgICAgc2tpbGw6IHNraWxsSW5kZXgsXG4gICAgICAgIHNraWxsSWQ6IHBheWxvYWQuc2tpbGxJZCxcbiAgICAgICAgaGVyb0luZGV4OiBwYXlsb2FkLmhlcm9JbmRleCxcbiAgICAgICAgb3B0aW9uOiBvcHRpb25cbiAgICAgIH07XG4gICAgICBsZXQgc2tpbGwgPSBvd25lci5za2lsbFtjb25maWcuc2tpbGxdO1xuXG4gICAgICAvL01hcCBEZXNjcmlwdGlvblxuICAgICAgbGV0IG1hcCA9IHtcbiAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgZW5lcmd5OiB7XG4gICAgICAgICAgYTogc2tpbGwuZW5lcmd5LmEsXG4gICAgICAgICAgaTogc2tpbGwuZW5lcmd5LmksXG4gICAgICAgICAgczogc2tpbGwuZW5lcmd5LnMsXG4gICAgICAgICAgdzogc2tpbGwuZW5lcmd5LncsXG4gICAgICAgICAgcjogc2tpbGwuZW5lcmd5LnIsXG4gICAgICAgICAgdG90YWw6XG4gICAgICAgICAgICBza2lsbC5lbmVyZ3kuYSArXG4gICAgICAgICAgICBza2lsbC5lbmVyZ3kuaSArXG4gICAgICAgICAgICBza2lsbC5lbmVyZ3kucyArXG4gICAgICAgICAgICBza2lsbC5lbmVyZ3kudyArXG4gICAgICAgICAgICBza2lsbC5lbmVyZ3kuclxuICAgICAgICB9LFxuICAgICAgICBkZXNjcmlwdGlvbjogc2tpbGwuZGVzY3JpcHRpb24sXG4gICAgICAgIGNsYXNzZXM6IHNraWxsLmNsYXNzZXMsXG4gICAgICAgIGNvb2xkb3duOiBza2lsbC5jb29sZG93blxuICAgICAgfTtcblxuICAgICAgbGV0IGFsdCA9IHNraWxsLmFsdCAhPT0gZmFsc2UgPyBza2lsbC5hbHQgOiBmYWxzZTtcblxuICAgICAgLy9CdWZmZXIgRGVzY3JpcHRpb25cbiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICBzdGF0ZS5kZXNjcmlwdGlvbiA9IHtcbiAgICAgICAgbmFtZUlkOiBjb25maWcubmFtZUlkLFxuICAgICAgICBza2lsbDogY29uZmlnLnNraWxsSWQsXG4gICAgICAgIGhlcm9JbmRleDogY29uZmlnLmhlcm9JbmRleCxcbiAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgIGFsdDogYWx0LFxuICAgICAgICBvcHRpb246IG9wdGlvblxuICAgICAgfTtcbiAgICB9LFxuICAgIG9uU3RhdHVzOiBmdW5jdGlvbihwYXlsb2FkKSB7XG4gICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTtcbiAgICAgIGxldCBzdGF0dXMgPSBfLmNvbmNhdChcbiAgICAgICAgcGF5bG9hZC5vbkF0dGFjayxcbiAgICAgICAgcGF5bG9hZC5vblJlY2VpdmUsXG4gICAgICAgIHBheWxvYWQub25TdGF0ZSxcbiAgICAgICAgcGF5bG9hZC5vblNlbGZcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhzdGF0dXMpO1xuICAgICAgbGV0IGdyb3VwID0gXy5ncm91cEJ5KHN0YXR1cywgXCJuYW1lSWRcIik7XG4gICAgICBjb25zb2xlLmxvZyhncm91cCk7XG4gICAgICBsZXQgc3ViZ3JvdXAgPSBfLnRvQXJyYXkoZ3JvdXApLm1hcCh4ID0+XG4gICAgICAgIF8udG9BcnJheShfLmdyb3VwQnkoeCwgXCJza2lsbEluZGV4XCIpKVxuICAgICAgKTtcbiAgICAgIGxldCBwcmVwID0gc3ViZ3JvdXAubWFwKHggPT4geFswXSk7XG4gICAgICBsZXQgZmluYWwgPSBwcmVwLm1hcCh4ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coeFswXSk7XG4gICAgICAgIGxldCBpbmZvID0geFswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lSWQ6IGluZm8ubmFtZUlkLFxuICAgICAgICAgIHN0YXR1czogaW5mby5za2lsbEluZGV4LFxuICAgICAgICAgIHZhbDogeFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhwcmVwKTtcbiAgICAgIGNvbnNvbGUubG9nKGZpbmFsKTtcbiAgICAgIHJldHVybiBmaW5hbDtcbiAgICAgIC8vIGxldCBzdWJncm91cCA9IGdyb3VwLm1hcCh4ID0+IF8uZ3JvdXBCeSh4LCBcInNraWxsSW5kZXhcIikpO1xuICAgIH0sXG4gICAgb25HZXRJbWFnZTogZnVuY3Rpb24ocGF5bG9hZCwgb3B0aW9uKSB7XG4gICAgICBpZiAob3B0aW9uID09PSBcInBhY2tldFwiKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc291cmNlLmFsbHkuZmluZEluZGV4KHggPT4geC5uYW1lID09PSBwYXlsb2FkLm9mZmVuc2UpO1xuICAgICAgICBsZXQgbmFtZUlkID0gdGhpcy5zb3VyY2UuYWxseVtpbmRleF0ubmFtZUlkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgXCIvYXNzZXRzL2NoYXJhY3Rlci9cIiArXG4gICAgICAgICAgbmFtZUlkLnNsaWNlKDAsIC0xKSArXG4gICAgICAgICAgXCIvc2tpbGxcIiArXG4gICAgICAgICAgKHBheWxvYWQuc2tpbGwgKyAxKSArXG4gICAgICAgICAgXCIvYXZhdGFyLmpwZ1wiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbiA9PT0gXCJjaGFyXCIpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBcIi9hc3NldHMvY2hhcmFjdGVyL1wiICsgcGF5bG9hZC5uYW1lSWQuc2xpY2UoMCwgLTEpICsgXCIvYXZhdGFyLmpwZ1wiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbiA9PT0gXCJza2lsbFwiKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgXCIvYXNzZXRzL2NoYXJhY3Rlci9cIiArXG4gICAgICAgICAgcGF5bG9hZC5uYW1lSWQuc2xpY2UoMCwgLTEpICtcbiAgICAgICAgICBcIi9za2lsbFwiICtcbiAgICAgICAgICAocGF5bG9hZC5za2lsbCArIDEpICtcbiAgICAgICAgICBcIi9hdmF0YXIuanBnXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9uID09PSBcInN0YXR1c1wiKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgXCIvYXNzZXRzL2NoYXJhY3Rlci9cIiArXG4gICAgICAgICAgcGF5bG9hZC5uYW1lSWQuc2xpY2UoMCwgLTEpICtcbiAgICAgICAgICBcIi9za2lsbFwiICtcbiAgICAgICAgICBwYXlsb2FkLnNraWxsICtcbiAgICAgICAgICBcIi9hdmF0YXIuanBnXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9uID09PSBcInRhcmdldGluZ1wiKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMucGFja2V0LmZpbmRJbmRleCh4ID0+IHgub2ZmZW5zZSA9PT0gcGF5bG9hZC5uYW1lKTtcbiAgICAgICAgbGV0IHNraWxsSWQgPSB0aGlzLnBhY2tldFtpbmRleF0uc2tpbGxJZDtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBcIi9hc3NldHMvY2hhcmFjdGVyL1wiICtcbiAgICAgICAgICBwYXlsb2FkLm5hbWVJZC5zbGljZSgwLCAtMSkgK1xuICAgICAgICAgIFwiL3NraWxsXCIgK1xuICAgICAgICAgIChza2lsbElkICsgMSkgK1xuICAgICAgICAgIFwiL2F2YXRhci5qcGdcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgdGFyZ2V0aW5nQ3VlOiBmdW5jdGlvbihwYXlsb2FkLCBuYW1lSWQpIHtcbiAgICAgIGxldCBuYW1lID0gcGF5bG9hZDtcbiAgICAgIGxldCBpbmRleCA9IHRoaXMucGFja2V0LmZpbmRJbmRleCh4ID0+IHgub2ZmZW5zZSA9PT0gcGF5bG9hZCk7XG4gICAgICBsZXQgcGFja2V0ID0gdGhpcy5wYWNrZXRbaW5kZXhdO1xuXG4gICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBza2lsbEluZGV4OiBwYWNrZXQuc2tpbGwsXG4gICAgICAgIHNraWxsSWQ6IHBhY2tldC5za2lsbElkLFxuICAgICAgICBoZXJvSW5kZXg6IHBhY2tldC5oZXJvSW5kZXgsXG4gICAgICAgIHRhcmdldDogcGFja2V0LnRhcmdldFxuICAgICAgfTtcblxuICAgICAgaWYgKG5hbWVJZCkge1xuICAgICAgICByZXN1bHQubmFtZUlkID0gbmFtZUlkO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgIG9uSFA6IGZ1bmN0aW9uKGhwKSB7XG4gICAgICBpZiAoaHAgPiA3MCkge1xuICAgICAgICByZXR1cm4gXCJsLS1ocC1mdWxsXCI7XG4gICAgICB9IGVsc2UgaWYgKGhwIDw9IDcwICYmIGhwID49IDQwKSB7XG4gICAgICAgIHJldHVybiBcImwtLWhwLW1pZFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibC0taHAtbG93XCI7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbiIsImZ1bmN0aW9uIGVuZXJneU1hbmFnZW1lbnQodGVtcG9yYXJ5LCBvcHRpb24pIHtcbiAgbGV0IGVuZXJneSA9IHRlbXBvcmFyeS5lbmVyZ3kgPyB0ZW1wb3JhcnkuZW5lcmd5IDogYXBwLnNvdXJjZS5lbmVyZ3kuYWxseTtcbiAgbGV0IHNraWxsID0gdGVtcG9yYXJ5LnNraWxsQmluZFxuICAgID8gdGVtcG9yYXJ5LnNraWxsQmluZFxuICAgIDogYXBwLnNvdXJjZS5hbGx5W3RlbXBvcmFyeS5oZXJvSW5kZXhdLnNraWxsW3RlbXBvcmFyeS5za2lsbF0uZW5lcmd5O1xuICBsZXQgdG90YWwgPSB7XG4gICAgZW5lcmd5OiBlbmVyZ3kuYSArIGVuZXJneS5pICsgZW5lcmd5LnMgKyBlbmVyZ3kudyxcbiAgICBza2lsbDogc2tpbGwuYSArIHNraWxsLmkgKyBza2lsbC5zICsgc2tpbGwud1xuICB9O1xuXG4gIGlmIChvcHRpb24gPT09IFwic3Vic3RyYWN0XCIpIHtcbiAgICBpZiAoc2tpbGwuYSA+IDApIHtcbiAgICAgIGVuZXJneS5hIC09IHNraWxsLmE7XG4gICAgICBlbmVyZ3kuciAtPSBza2lsbC5hO1xuICAgIH1cbiAgICBpZiAoc2tpbGwuaSA+IDApIHtcbiAgICAgIGVuZXJneS5pIC09IHNraWxsLmk7XG4gICAgICBlbmVyZ3kuciAtPSBza2lsbC5pO1xuICAgIH1cbiAgICBpZiAoc2tpbGwucyA+IDApIHtcbiAgICAgIGVuZXJneS5zIC09IHNraWxsLnM7XG4gICAgICBlbmVyZ3kuciAtPSBza2lsbC5zO1xuICAgIH1cbiAgICBpZiAoc2tpbGwudyA+IDApIHtcbiAgICAgIGVuZXJneS53IC09IHNraWxsLnc7XG4gICAgICBlbmVyZ3kuciAtPSBza2lsbC53O1xuICAgIH1cbiAgICBpZiAoc2tpbGwuciA+IDApIHtcbiAgICAgIGVuZXJneS5yIC09IHNraWxsLnI7XG4gICAgICBhcHAuc3RhdGUuZW5lcmd5LnJhbmRvbSArPSBza2lsbC5yO1xuICAgIH1cbiAgfSBlbHNlIGlmIChvcHRpb24gPT09IFwiYWRkXCIpIHtcbiAgICBpZiAoc2tpbGwuYSA+IDApIHtcbiAgICAgIGVuZXJneS5hICs9IHNraWxsLmE7XG4gICAgICBlbmVyZ3kuciArPSBza2lsbC5hO1xuICAgIH1cbiAgICBpZiAoc2tpbGwuaSA+IDApIHtcbiAgICAgIGVuZXJneS5pICs9IHNraWxsLmk7XG4gICAgICBlbmVyZ3kuciArPSBza2lsbC5pO1xuICAgIH1cbiAgICBpZiAoc2tpbGwucyA+IDApIHtcbiAgICAgIGVuZXJneS5zICs9IHNraWxsLnM7XG4gICAgICBlbmVyZ3kuciArPSBza2lsbC5zO1xuICAgIH1cbiAgICBpZiAoc2tpbGwudyA+IDApIHtcbiAgICAgIGVuZXJneS53ICs9IHNraWxsLnc7XG4gICAgICBlbmVyZ3kuciArPSBza2lsbC53O1xuICAgIH1cbiAgICBpZiAoc2tpbGwuciA+IDApIHtcbiAgICAgIGVuZXJneS5yICs9IHNraWxsLnI7XG4gICAgICBhcHAuc3RhdGUuZW5lcmd5LnJhbmRvbSAtPSBza2lsbC5yO1xuICAgIH1cbiAgfSBlbHNlIGlmIChvcHRpb24gPT09IFwiY2hlY2tcIikge1xuICAgIGxldCBhY3RpdmUgPSB0cnVlO1xuICAgIGlmICh0b3RhbC5lbmVyZ3kgPj0gdG90YWwuc2tpbGwpIHtcbiAgICAgIGxldCBjb3VudCA9IFt0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlXTtcbiAgICAgIGlmIChza2lsbC5hID49IDApIHtcbiAgICAgICAgY291bnRbMF0gPSBlbmVyZ3kuYSA+PSBza2lsbC5hID8gZmFsc2UgOiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNraWxsLmkgPj0gMCkge1xuICAgICAgICBjb3VudFsxXSA9IGVuZXJneS5pID49IHNraWxsLmkgPyBmYWxzZSA6IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc2tpbGwucyA+PSAwKSB7XG4gICAgICAgIGNvdW50WzJdID0gZW5lcmd5LnMgPj0gc2tpbGwucyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChza2lsbC53ID49IDApIHtcbiAgICAgICAgY291bnRbM10gPSBlbmVyZ3kudyA+PSBza2lsbC53ID8gZmFsc2UgOiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNraWxsLnIgPj0gMCkge1xuICAgICAgICBjb3VudFs0XSA9IGVuZXJneS5yID49IHRvdGFsLnNraWxsICsgc2tpbGwuciA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvdW50LmZpbHRlcih4ID0+IHggPT09IGZhbHNlKS5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ1dHRvbk1hbmFnZW1lbnQocGF5bG9hZCwgb3B0aW9uKSB7XG4gIC8vVGFyZ2V0IEJ1dHRvblxuICBpZiAob3B0aW9uICE9PSBcIm9uU2VsZlwiKSB7XG4gICAgaWYgKHBheWxvYWQuYWltID09PSBcImVuZW15XCIpIHtcbiAgICAgIGFwcC5zdGF0ZS5idXR0b24uZW5lbXkuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgLy9EZWZpbmVcbiAgICAgICAgbGV0IHNraWxsID0gYXBwLnNvdXJjZS5hbGx5W3BheWxvYWQuaGVyb0luZGV4XS5za2lsbFtwYXlsb2FkLnNraWxsXTtcbiAgICAgICAgbGV0IGVuZW15U3RhdHVzID0gYXBwLnNvdXJjZS5lbmVteVt4LmluZGV4XS5zdGF0dXM7XG5cbiAgICAgICAgLy9JbnZ1bG5lcmFiaWxpdHlcbiAgICAgICAgbGV0IHN0YXRlID0gZW5lbXlTdGF0dXMub25TdGF0ZTtcbiAgICAgICAgbGV0IGludnVsbmVyYWJsZSA9IGludnVsbmVyYWJsZU1hbmFnZW1lbnQoc3RhdGUsIHNraWxsKTtcblxuICAgICAgICAvL0Rpc2FibGVcbiAgICAgICAgeC5idXR0b24gPSB4LmRpc2FibGVkIHx8IGludnVsbmVyYWJsZSA/IHRydWUgOiAheC5idXR0b247XG5cbiAgICAgICAgLy9JZ25vcmVcbiAgICAgICAgbGV0IGlnbm9yZSA9IGlnbm9yZU1hbmFnZW1lbnQoc3RhdGUsIHNraWxsKTtcbiAgICAgICAgY29uc29sZS5sb2coaWdub3JlKTtcblxuICAgICAgICAvL1ByZXZlbnQgSW52dWxuZXJhYmlsaXR5XG4gICAgICAgIGlmIChcbiAgICAgICAgICBvcHRpb24gPT09IFwib25Ta2lsbFwiICYmXG4gICAgICAgICAgZW5lbXlTdGF0dXMub25TdGF0ZS5zb21lKHggPT4geC50eXBlID09PSBcImRpc2FibGVEckl2XCIpICYmXG4gICAgICAgICAgaWdub3JlID09PSBmYWxzZVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaGknKVxuICAgICAgICAgIHguYnV0dG9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coeC5idXR0b24pXG5cbiAgICAgICAgLy9NYXJraW5nXG4gICAgICAgIGlmIChwYXlsb2FkLm1hcmtpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2tpbGwubmFtZTtcbiAgICAgICAgICBsZXQgbWFya2luZyA9XG4gICAgICAgICAgICBlbmVteVN0YXR1cy5vblJlY2VpdmUuc29tZSh4ID0+IHgubmFtZSA9PT0gc2tpbGxOYW1lKSB8fFxuICAgICAgICAgICAgZW5lbXlTdGF0dXMub25TdGF0ZS5zb21lKHggPT4geC5uYW1lID09PSBza2lsbE5hbWUpO1xuICAgICAgICAgIGlmIChtYXJraW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICB4LmJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHBheWxvYWQuYWltID09PSBcImVuZW15bG9ja1wiKSB7XG4gICAgICBhcHAuc3RhdGUuYnV0dG9uLmVuZW15LmZvckVhY2goeCA9PiB7XG4gICAgICAgIC8vRGVmaW5lXG4gICAgICAgIGxldCBza2lsbCA9IGFwcC5zb3VyY2UuYWxseVtwYXlsb2FkLmhlcm9JbmRleF0uc2tpbGxbcGF5bG9hZC5za2lsbF07XG4gICAgICAgIGxldCBlbmVteVN0YXR1cyA9IGFwcC5zb3VyY2UuZW5lbXlbeC5pbmRleF0uc3RhdHVzO1xuICAgICAgICBsZXQgbG9jayA9IGVuZW15U3RhdHVzLm9uU3RhdGUuc29tZShcbiAgICAgICAgICB4ID0+IHgudHlwZSA9PT0gXCJzdGF0ZVwiICYmIHguaW5mbyA9PT0gc2tpbGwubmFtZVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChsb2NrID09PSB0cnVlKSB7XG4gICAgICAgICAgLy9JbnZ1bG5lcmFiaWxpdHlcbiAgICAgICAgICBsZXQgc3RhdGUgPSBlbmVteVN0YXR1cy5vblN0YXRlO1xuICAgICAgICAgIGxldCBpbnZ1bG5lcmFibGUgPSBpbnZ1bG5lcmFibGVNYW5hZ2VtZW50KHN0YXRlLCBza2lsbCk7XG5cbiAgICAgICAgICAvL0Rpc2FibGVcbiAgICAgICAgICB4LmJ1dHRvbiA9IHguZGlzYWJsZWQgfHwgaW52dWxuZXJhYmxlID8gdHJ1ZSA6ICF4LmJ1dHRvbjtcblxuICAgICAgICAgIC8vSWdub3JlXG4gICAgICAgICAgbGV0IGlnbm9yZSA9IGlnbm9yZU1hbmFnZW1lbnQoc3RhdGUsIHNraWxsKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbnZ1bG5lcmFibGUpO1xuXG4gICAgICAgICAgLy9QcmV2ZW50IEludnVsbmVyYWJpbGl0eVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG9wdGlvbiA9PT0gXCJvblNraWxsXCIgJiZcbiAgICAgICAgICAgIGVuZW15U3RhdHVzLm9uU3RhdGUuc29tZSh4ID0+IHgudHlwZSA9PT0gXCJkaXNhYmxlRHJJdlwiKSAmJlxuICAgICAgICAgICAgaWdub3JlID09PSBmYWxzZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgeC5idXR0b24gPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL01hcmtpbmdcbiAgICAgICAgICBpZiAocGF5bG9hZC5tYXJraW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2tpbGwubmFtZTtcbiAgICAgICAgICAgIGxldCBtYXJraW5nID1cbiAgICAgICAgICAgICAgZW5lbXlTdGF0dXMub25SZWNlaXZlLnNvbWUoeCA9PiB4Lm5hbWUgPT09IHNraWxsTmFtZSkgfHxcbiAgICAgICAgICAgICAgZW5lbXlTdGF0dXMub25TdGF0ZS5zb21lKHggPT4geC5uYW1lID09PSBza2lsbE5hbWUpO1xuICAgICAgICAgICAgaWYgKG1hcmtpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgeC5idXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHBheWxvYWQuYWltID09PSBcImFsbGVuZW15XCIgfHxcbiAgICAgIHBheWxvYWQuYWltID09PSBcInJhbmRvbWVuZW15XCIgfHxcbiAgICAgIHBheWxvYWQuYWltID09PSBcImFsbGVuZW15YWxsYWxseVwiXG4gICAgKSB7XG4gICAgICBhcHAuc3RhdGUuYnV0dG9uLmVuZW15LmZvckVhY2goeCA9PiB7XG4gICAgICAgIC8vRGVmaW5lXG4gICAgICAgIGxldCBza2lsbCA9IGFwcC5zb3VyY2UuYWxseVtwYXlsb2FkLmhlcm9JbmRleF0uc2tpbGxbcGF5bG9hZC5za2lsbF07XG4gICAgICAgIGxldCBlbmVteVN0YXR1cyA9IGFwcC5zb3VyY2UuZW5lbXlbeC5pbmRleF0uc3RhdHVzO1xuXG4gICAgICAgIC8vSW52dWxuZXJhYmlsaXR5XG4gICAgICAgIGxldCBzdGF0ZSA9IGVuZW15U3RhdHVzLm9uU3RhdGU7XG4gICAgICAgIGxldCBpbnZ1bG5lcmFibGUgPSBpbnZ1bG5lcmFibGVNYW5hZ2VtZW50KHN0YXRlLCBza2lsbCk7XG5cbiAgICAgICAgLy9EaXNhYmxlXG4gICAgICAgIHguYnV0dG9uID0geC5kaXNhYmxlZCB8fCBpbnZ1bG5lcmFibGUgPyB0cnVlIDogIXguYnV0dG9uO1xuXG4gICAgICAgIC8vUHJldmVudCBJbnZ1bG5lcmFiaWxpdHlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG9wdGlvbiA9PT0gXCJvblNraWxsXCIgJiZcbiAgICAgICAgICBlbmVteVN0YXR1cy5vblN0YXRlLnNvbWUoeCA9PiB4LnR5cGUgPT09IFwiZGlzYWJsZURySXZcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgeC5idXR0b24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwYXlsb2FkLmFpbSA9PT0gXCJhbGx5XCIgfHwgcGF5bG9hZC5haW0gPT09IFwiYWxsYWxseVwiKSB7XG4gICAgICBhcHAuc3RhdGUuYnV0dG9uLmFsbHkuZm9yRWFjaChcbiAgICAgICAgeCA9PiAoeC5idXR0b24gPSB4LmRpc2FibGVkID8gdHJ1ZSA6ICF4LmJ1dHRvbilcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChwYXlsb2FkLmFpbSA9PT0gXCJvdGhlcmFsbHlcIikge1xuICAgICAgYXBwLnN0YXRlLmJ1dHRvbi5hbGx5LmZvckVhY2goeCA9PiB7XG4gICAgICAgIGxldCBuYW1lID0gYXBwLnN0YXRlLmJ1dHRvbi5hbGx5W3BheWxvYWQuaGVyb0luZGV4XS5uYW1lO1xuICAgICAgICBpZiAoeC5uYW1lICE9PSBuYW1lKSB7XG4gICAgICAgICAgeC5idXR0b24gPSB4LmRpc2FibGVkID8gdHJ1ZSA6ICF4LmJ1dHRvbjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwYXlsb2FkLmFpbSA9PT0gXCJzZWxmXCIpIHtcbiAgICAgIGxldCBhbGx5ID0gYXBwLnN0YXRlLmJ1dHRvbi5hbGx5W3BheWxvYWQuaGVyb0luZGV4XTtcbiAgICAgIGFsbHkuYnV0dG9uID0gYWxseS5kaXNhYmxlZCA/IHRydWUgOiAhYWxseS5idXR0b247XG4gICAgfVxuICB9XG5cbiAgLy9Ta2lsbCBCdXR0b25cbiAgaWYgKG9wdGlvbiA9PT0gXCJvblRhcmdldFwiKSB7XG4gICAgY29uc29sZS5sb2coXCJvblNraWxsXCIpO1xuICAgIGFwcC5zdGF0ZS5idXR0b24uYWxseS5mb3JFYWNoKHggPT4ge1xuICAgICAgaWYgKHgub25Ta2lsbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgeC5za2lsbC5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIHMuYnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB4Lm5hbWUgPT09IHBheWxvYWQub2ZmZW5zZSAmJlxuICAgICAgICAgICAgcy5uYW1lID09PVxuICAgICAgICAgICAgICBhcHAuc291cmNlLmFsbHlbcGF5bG9hZC5oZXJvSW5kZXhdLnNraWxsW3BheWxvYWQuc2tpbGxdLm5hbWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHMuYnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAob3B0aW9uID09PSBcIm9uQ2FuY2VsXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIm9uQ2FuY2VsXCIpO1xuICAgIGFwcC5zdGF0ZS5idXR0b24uYWxseS5mb3JFYWNoKHggPT4ge1xuICAgICAgaWYgKHgub25Ta2lsbCA9PT0gZmFsc2UgfHwgeC5uYW1lID09PSBwYXlsb2FkLm9mZmVuc2UpIHtcbiAgICAgICAgeC5za2lsbC5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIHMuYnV0dG9uID0gcy5kaXNhYmxlZCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB4Lm5hbWUgPT09IHBheWxvYWQub2ZmZW5zZSAmJlxuICAgICAgICAgICAgcy5uYW1lID09PVxuICAgICAgICAgICAgICBhcHAuc291cmNlLmFsbHlbcGF5bG9hZC5oZXJvSW5kZXhdLnNraWxsW3BheWxvYWQuc2tpbGxdLm5hbWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHMuYnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIGlmIChvcHRpb24gPT09IFwib25UYXJnZXRcIikge1xuICAgIGNvbnNvbGUubG9nKFwib25UYXJnZXRcIik7XG4gICAgYXBwLnN0YXRlLmJ1dHRvbi5hbGx5LmZvckVhY2goeCA9PiB7XG4gICAgICBsZXQgaW5kZXggPSBhcHAucGFja2V0LmZpbmRJbmRleChzID0+IHMub2ZmZW5zZSA9PT0geC5uYW1lKTtcbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgeC5za2lsbC5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIHMuYnV0dG9uID0gcy5kaXNhYmxlZCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAob3B0aW9uID09PSBcIm9uU2VsZlwiKSB7XG4gICAgY29uc29sZS5sb2coXCJvblNlbGZcIik7XG4gICAgYXBwLnN0YXRlLmJ1dHRvbi5hbGx5W3BheWxvYWQuaGVyb0luZGV4XS5za2lsbC5mb3JFYWNoKHMgPT4ge1xuICAgICAgcy5idXR0b24gPSBzLmRpc2FibGVkID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLy9FbmVyZ3kgTWFuYWdlbWVudFxuICBpZiAob3B0aW9uICE9PSBcIm9uU2tpbGxcIikge1xuICAgIGFwcC5zdGF0ZS5idXR0b24uYWxseS5mb3JFYWNoKCh4LCB4aSkgPT4ge1xuICAgICAgaWYgKHgub25Ta2lsbCA9PT0gZmFsc2UgJiYgeC5uYW1lICE9PSBwYXlsb2FkLm9mZmVuc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coeC5uYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2cob3B0aW9uKTtcbiAgICAgICAgeC5za2lsbC5mb3JFYWNoKChzLCBzaSkgPT4ge1xuICAgICAgICAgIGxldCBlbmVyZ3kgPSBlbmVyZ3lNYW5hZ2VtZW50KHsgaGVyb0luZGV4OiB4aSwgc2tpbGw6IHNpIH0sIFwiY2hlY2tcIik7XG4gICAgICAgICAgcy5idXR0b24gPSBzLmRpc2FibGVkIHx8IGVuZXJneSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB4Lm5hbWUgPT09IHBheWxvYWQub2ZmZW5zZSAmJlxuICAgICAgICAgICAgcy5uYW1lID09PVxuICAgICAgICAgICAgICBhcHAuc291cmNlLmFsbHlbcGF5bG9hZC5oZXJvSW5kZXhdLnNraWxsW3BheWxvYWQuc2tpbGxdLm5hbWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHMuYnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAob3B0aW9uID09PSBcIm9uU2VsZlwiIHx8IG9wdGlvbiA9PT0gXCJvbkNhbmNlbFwiKSAmJlxuICAgICAgICB4Lm5hbWUgPT09IHBheWxvYWQub2ZmZW5zZVxuICAgICAgKSB7XG4gICAgICAgIHguc2tpbGwuZm9yRWFjaCgocywgc2kpID0+IHtcbiAgICAgICAgICBsZXQgZW5lcmd5ID0gZW5lcmd5TWFuYWdlbWVudCh7IGhlcm9JbmRleDogeGksIHNraWxsOiBzaSB9LCBcImNoZWNrXCIpO1xuICAgICAgICAgIHMuYnV0dG9uID0gcy5kaXNhYmxlZCB8fCBlbmVyZ3kgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0dW5NYW5hZ2VtZW50KG9uU3RhdGUsIHNraWxsKSB7XG4gIGxldCBzdHVuID0gb25TdGF0ZS5tYXAoeCA9PiB7XG4gICAgaWYgKHgudHlwZSA9PT0gXCJzdHVuXCIpIHtcbiAgICAgIGxldCBpZ25vcmUgPSBpZ25vcmVNYW5hZ2VtZW50KG9uU3RhdGUsIHgpO1xuICAgICAgbGV0IGludGVyc2VjdCA9IF8uaW50ZXJzZWN0aW9uKHguY2xhc3Nlcywgc2tpbGwuY2xhc3Nlcyk7XG5cbiAgICAgIGxldCBldmFsdWF0ZTtcblxuICAgICAgaWYgKHguaW5mbyA9PT0gXCJpbmNsdXNpdmVcIikge1xuICAgICAgICBldmFsdWF0ZSA9IGludGVyc2VjdC5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmICh4LmluZm8gPT09IFwiZGVjbHVzaXZlXCIpIHtcbiAgICAgICAgZXZhbHVhdGUgPSBpbnRlcnNlY3QubGVuZ3RoID09PSAwID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZhbHVhdGUgJiYgIWlnbm9yZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmIChzdHVuLmZpbHRlcih4ID0+IHggPT09IHRydWUpLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52dWxuZXJhYmxlTWFuYWdlbWVudChvblN0YXRlLCBza2lsbCkge1xuICBsZXQgaW52dWxuZXJhYmxlID0gb25TdGF0ZS5tYXAoeCA9PiB7XG4gICAgaWYgKHgudHlwZSA9PT0gXCJpbnZ1bG5lcmFibGVcIikge1xuICAgICAgbGV0IGlnbm9yZUludnVsID0gc2tpbGwuaWdub3JlSW52dWw7XG4gICAgICBsZXQgaW50ZXJzZWN0ID0gXy5pbnRlcnNlY3Rpb24oeC5jbGFzc2VzLCBza2lsbC5jbGFzc2VzKTsgICAgICBcblxuICAgICAgbGV0IGV2YWx1YXRlO1xuXG4gICAgICBpZiAoeC5pbmZvID09PSBcImluY2x1c2l2ZVwiKSB7XG4gICAgICAgIGV2YWx1YXRlID0gaW50ZXJzZWN0Lmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKHguaW5mbyA9PT0gXCJkZWNsdXNpdmVcIikge1xuICAgICAgICBldmFsdWF0ZSA9IGludGVyc2VjdC5sZW5ndGggPT09IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmFsdWF0ZSAmJiAhaWdub3JlSW52dWwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoaW52dWxuZXJhYmxlLmZpbHRlcih4ID0+IHggPT09IHRydWUpLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaWdub3JlTWFuYWdlbWVudChvblN0YXRlLCBza2lsbCkge1xuICBsZXQgaWdub3JlID0gb25TdGF0ZS5tYXAoeCA9PiB7XG4gICAgaWYgKHgudHlwZSA9PT0gXCJpZ25vcmVcIikge1xuICAgICAgbGV0IGludGVyc2VjdCA9IF8uaW50ZXJzZWN0aW9uKHguY2xhc3Nlcywgc2tpbGwuY2xhc3Nlcyk7XG5cbiAgICAgIGxldCBldmFsdWF0ZTtcblxuICAgICAgaWYgKHguaW5mbyA9PT0gXCJpbmNsdXNpdmVcIikge1xuICAgICAgICBldmFsdWF0ZSA9IGludGVyc2VjdC5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmICh4LmluZm8gPT09IFwiZGVjbHVzaXZlXCIpIHtcbiAgICAgICAgZXZhbHVhdGUgPSBpbnRlcnNlY3QubGVuZ3RoID09PSAwID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZhbHVhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoaWdub3JlLmZpbHRlcih4ID0+IHggPT09IHRydWUpLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsImZ1bmN0aW9uIHZ1ZUJpbmQocGF5bG9hZCkge1xuICBsZXQgdXNlcm5hbWUgPSBnZXRDb29raWUoXCJ1c2VybmFtZVwiKTtcbiAgY29uc29sZS5sb2cocGF5bG9hZCk7XG4gIGxldCBhbGx5ID0gcGF5bG9hZC50ZWFtLnRlYW1FdmVuID09PSB1c2VybmFtZSA/IFwidGVhbUV2ZW5cIiA6IFwidGVhbU9kZFwiO1xuICBsZXQgZW5lbXkgPSBwYXlsb2FkLnRlYW0udGVhbUV2ZW4gPT09IHVzZXJuYW1lID8gXCJ0ZWFtT2RkXCIgOiBcInRlYW1FdmVuXCI7XG4gIGxldCB0dXJuVmFsID0gYWxseSA9PT0gXCJ0ZWFtRXZlblwiID8gMCA6IDE7XG4gIGxldCBteVR1cm4gPSBwYXlsb2FkLnR1cm4gJSAyID09PSB0dXJuVmFsID8gdHJ1ZSA6IGZhbHNlO1xuXG4gIGlmIChwYXlsb2FkLnRlYW0udGVhbUV2ZW4gIT09IHVzZXJuYW1lICYmIHBheWxvYWQudGVhbS50ZWFtT2RkICE9PSB1c2VybmFtZSkge1xuICAgIGNvbnNvbGUubG9nKFwic3BlY3RhdGVcIik7XG4gICAgYXBwLm1vZGUgPSBcInNwZWN0YXRlXCI7XG4gICAgbXlUdXJuID0gZmFsc2U7XG4gICAgLy8gcmV0dXJuO1xuICB9XG5cbiAgaWYgKG15VHVybiA9PT0gdHJ1ZSkge1xuICAgIGFwcC4kcmVmcy5zb3VuZFN0YXJ0VHVybi5wbGF5KCk7XG4gIH1cblxuICAvL1RpbWVcbiAgbGV0IHRpbWVEaWZmID0gKERhdGUubm93KCkgLSBwYXlsb2FkLnRpbWVzdGFtcCkgLyAxMDAwO1xuICBsZXQgdGltZUNhbGMgPSBNYXRoLmZsb29yKDQ1IC0gdGltZURpZmYpO1xuICBsZXQgcmVtYWluaW5nID0gMTAwICogKHRpbWVDYWxjIC8gNDUpO1xuICBjb25zb2xlLmxvZyhwYXlsb2FkLnRpbWVzdGFtcCwgdGltZURpZmYsIHRpbWVDYWxjLCByZW1haW5pbmcpO1xuXG4gIGlmIChyZW1haW5pbmcgPCAwKSB7XG4gICAgcmVtYWluaW5nID0gMDtcbiAgfVxuICBhcHAuc3RhdGUudGltZXIudHVybiA9IHJlbWFpbmluZztcblxuICAvLyBpZiAocGF5bG9hZC53aW5uZXIuc3RhdGUgPT09IHRydWUgJiYgcGF5bG9hZC53aW5uZXIubmFtZSA9PT0gdXNlcm5hbWUpIHtcbiAgLy8gfSBlbHNlIGlmIChcbiAgLy8gICBwYXlsb2FkLndpbm5lci5zdGF0ZSA9PT0gdHJ1ZSAmJlxuICAvLyAgIHBheWxvYWQud2lubmVyLm5hbWUgIT09IHVzZXJuYW1lXG4gIC8vICkge1xuICAvLyAgIGFwcC4kcmVmcy5zb3VuZExvc2UucGxheSgpO1xuICAvLyB9XG5cbiAgbGV0IHN0b3JlID0ge1xuICAgIGVuZXJneToge1xuICAgICAgYWxseTogcGF5bG9hZC5lbmVyZ3lbYWxseV0sXG4gICAgICBlbmVteTogcGF5bG9hZC5lbmVyZ3lbZW5lbXldXG4gICAgfSxcbiAgICBhbGx5OiBwYXlsb2FkW2FsbHldLm1hcCh4ID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLngsXG4gICAgICAgIGluZGljYXRvcjogc3RhdHVzVmlldyh4Lm5hbWUsIHguc3RhdHVzLCB0dXJuVmFsKVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBlbmVteTogcGF5bG9hZFtlbmVteV0ubWFwKHggPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ueCxcbiAgICAgICAgc2tpbGw6IHguc2tpbGwuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpLFxuICAgICAgICBpbmRpY2F0b3I6IHN0YXR1c1ZpZXcoeC5uYW1lLCB4LnN0YXR1cywgdHVyblZhbClcbiAgICAgIH07XG4gICAgfSksXG4gICAgdHVybjogcGF5bG9hZC50dXJuLFxuICAgIG15VHVybjogbXlUdXJuLFxuICAgIHR1cm5WYWw6IHR1cm5WYWwsXG4gICAgcm9vbTogcGF5bG9hZC5yb29tLFxuICAgIG1ldGE6IHtcbiAgICAgIG15TmFtZTogcGF5bG9hZC50ZWFtW2FsbHldLFxuICAgICAgdGhlaXJOYW1lOiBwYXlsb2FkLnRlYW1bZW5lbXldXG4gICAgfSxcbiAgICB0aW1lc3RhbXA6IHBheWxvYWQudGltZXN0YW1wXG4gIH07XG4gIHN0b3JlLmVuZXJneS5hbGx5LnIgPVxuICAgIHN0b3JlLmVuZXJneS5hbGx5LmEgK1xuICAgIHN0b3JlLmVuZXJneS5hbGx5LmkgK1xuICAgIHN0b3JlLmVuZXJneS5hbGx5LnMgK1xuICAgIHN0b3JlLmVuZXJneS5hbGx5Lnc7XG4gIGNvbnNvbGUubG9nKHN0b3JlKTtcbiAgbGV0IGJ1dHRvbiA9IHtcbiAgICBhbGx5OiBzdG9yZS5hbGx5Lm1hcCh4ID0+IHtcbiAgICAgIC8vIGxldCBkaXNhYmxlZCA9IHguc3RhdHVzLm9uU3RhdGUuZmluZEluZGV4KHggPT4geC50eXBlID09PSAnc3R1bicpID4gLTEgfHwgeC5ocCA8PSAwID8gdHJ1ZSA6IGZhbHNlXG4gICAgICBsZXQgZGlzYWJsZWQgPSB4LmhwIDw9IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICAvLyBsZXQgc3R1biA9IHguc3RhdHVzLm9uU3RhdGUuc29tZSh4ID0+IHgudHlwZSA9PT0gXCJzdHVuXCIpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogeC5uYW1lLFxuICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgIG9uU2tpbGw6IGZhbHNlLFxuICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgIHNraWxsOiB4LnNraWxsLm1hcChzID0+IHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzLnR5cGUpO1xuICAgICAgICAgIGxldCBlbmVyZ3kgPSBlbmVyZ3lNYW5hZ2VtZW50KFxuICAgICAgICAgICAgeyBlbmVyZ3k6IHN0b3JlLmVuZXJneS5hbGx5LCBza2lsbEJpbmQ6IHMuZW5lcmd5IH0sXG4gICAgICAgICAgICBcImNoZWNrXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGxldCBzdHVuID0gc3R1bk1hbmFnZW1lbnQoeC5zdGF0dXMub25TdGF0ZSwgcyk7XG4gICAgICAgICAgLy8gbGV0IGRpc2FibGVEclZyID1cbiAgICAgICAgICAvLyAgIHMudHlwZSA9PT0gXCJpbnZ1bG5lcmFibGVcIiAmJlxuICAgICAgICAgIC8vICAgeC5zdGF0dXMub25TdGF0ZS5zb21lKHggPT4geC50eXBlID09PSBcImRpc2FibGVEckl2XCIpXG4gICAgICAgICAgLy8gICAgID8gdHJ1ZVxuICAgICAgICAgIC8vICAgICA6IGZhbHNlO1xuICAgICAgICAgIGxldCBkaXNhYmxlZCA9XG4gICAgICAgICAgICBzdHVuIHx8XG4gICAgICAgICAgICBzLnJlcXVpcmVkIHx8XG4gICAgICAgICAgICBzLnN0YXRlID09PSBcImNvb2xkb3duXCIgfHxcbiAgICAgICAgICAgIG15VHVybiA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgIHguaHAgPD0gMFxuICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogcy5uYW1lLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgYnV0dG9uOiBkaXNhYmxlZCB8fCBlbmVyZ3kgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBlbmVteTogc3RvcmUuZW5lbXkubWFwKCh4LCBpKSA9PiB7XG4gICAgICAvLyBsZXQgZGlzYWJsZWQgPVxuICAgICAgLy8gICB4LnN0YXR1cy5vblN0YXRlLnNvbWUoeCA9PiB4LnR5cGUgPT09IFwiaW52dWxuZXJhYmxlXCIpIHx8IHguaHAgPD0gMFxuICAgICAgLy8gICAgID8gdHJ1ZVxuICAgICAgLy8gICAgIDogZmFsc2U7XG4gICAgICBsZXQgZGlzYWJsZWQgPSB4LmhwIDw9IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB4Lm5hbWUsXG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgIGJ1dHRvbjogdHJ1ZVxuICAgICAgfTtcbiAgICB9KVxuICB9O1xuXG4gIGFwcC5zb3VyY2UgPSBzdG9yZTtcbiAgYXBwLnN0YXRlLmJ1dHRvbiA9IGJ1dHRvbjtcbiAgYXBwLnN0YXRlLndpbm5lciA9IHBheWxvYWQud2lubmVyO1xuICBhcHAuc3RhdGUuZXhjaGFuZ2UubW9kYWwgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc3RhdHVzVmlldyhuYW1lLCBwYXlsb2FkLCB0dXJuVmFsKSB7XG4gIGNvbnNvbGUubG9nKG5hbWUuc2xpY2UoLTEpLCBwYXlsb2FkKTtcbiAgbGV0IHN0YXR1cyA9IF8uY29uY2F0KFxuICAgIHBheWxvYWQub25BdHRhY2ssXG4gICAgcGF5bG9hZC5vblJlY2VpdmUsXG4gICAgcGF5bG9hZC5vblN0YXRlLFxuICAgIHBheWxvYWQub25TZWxmXG4gICk7XG4gIGNvbnNvbGUubG9nKFwiaW52aXNpYmxlXCIsIHR1cm5WYWwsIG5hbWUuc2xpY2UoLTEpKTtcbiAgc3RhdHVzID0gc3RhdHVzLmZpbHRlcihcbiAgICB4ID0+XG4gICAgICB4LmlzSW52aXNpYmxlID09PSBmYWxzZSB8fFxuICAgICAgKHguaXNJbnZpc2libGUgIT09IGZhbHNlICYmIE51bWJlcih4Lm5hbWVJZC5zbGljZSgtMSkpID09PSB0dXJuVmFsKVxuICApO1xuICAvLyBpZiAodHVyblZhbCA9PT0gTnVtYmVyKG5hbWUuc2xpY2UoLTEpKSkge1xuICAvLyAgIHN0YXR1cyA9IHN0YXR1cy5maWx0ZXIoXG4gIC8vICAgICB4ID0+IHguaXNJbnZpc2libGUgPT09IGZhbHNlIHx8IHguaXNJbnZpc2libGUgIT09IGZhbHNlICYmIE51bWJlcih4Lm5hbWVJZC5zbGljZSgtMSkpID09PSB0dXJuVmFsXG4gIC8vICAgKTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBzdGF0dXMgPSBzdGF0dXMuZmlsdGVyKFxuICAvLyAgICAgeCA9PiB4LmlzSW52aXNpYmxlID09PSBmYWxzZSB8fCB4LmlzSW52aXNpYmxlICE9PSBmYWxzZSAmJiBOdW1iZXIoeC5uYW1lSWQuc2xpY2UoLTEpKSA9PT0gdHVyblZhbFxuICAvLyAgICk7XG4gIC8vIH1cbiAgbGV0IGdyb3VwQnlOYW1lSWQgPSBfLmdyb3VwQnkoc3RhdHVzLCBcIm5hbWVJZFwiKTtcbiAgbGV0IHZhbHVlc0J5TmFtZUlkID0gXy52YWx1ZXMoZ3JvdXBCeU5hbWVJZCk7XG4gIGxldCBncm91cEJ5U2tpbGxJbmRleCA9IHZhbHVlc0J5TmFtZUlkLm1hcCh4ID0+IF8uZ3JvdXBCeSh4LCBcInNraWxsSW5kZXhcIikpO1xuICBsZXQgdmFsdWVzQnlTa2lsbEluZGV4ID0gXy52YWx1ZXMoZ3JvdXBCeVNraWxsSW5kZXgpO1xuICBsZXQgY29uY2F0VmFsdWVzID0gW107XG4gIHZhbHVlc0J5U2tpbGxJbmRleC5mb3JFYWNoKHggPT4ge1xuICAgIGNvbmNhdFZhbHVlcyA9IGNvbmNhdFZhbHVlcy5jb25jYXQoXy52YWx1ZXMoeCkpO1xuICB9KTtcbiAgbGV0IGZpbmFsID0gY29uY2F0VmFsdWVzLm1hcCh4ID0+IHtcbiAgICBsZXQgaW5mbyA9IHhbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGluZm8ubmFtZSxcbiAgICAgIG5hbWVJZDogaW5mby5uYW1lSWQsXG4gICAgICBza2lsbEluZGV4OiBpbmZvLnNraWxsSW5kZXgsXG4gICAgICBhY3RpdmU6IGluZm8uYWN0aXZlLFxuICAgICAgdmFsOiB4XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBmaW5hbDtcbn1cbiIsImZ1bmN0aW9uIGluaXRpYXRlKCkge1xuICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoXCIvXCIpO1xuICBsZXQgcm9vbSA9IHVybFt1cmwubGVuZ3RoIC0gMV07XG4gIGlmIChyb29tICE9PSBcIlwiKSB7XG4gICAgc29ja2V0LmVtaXQoXCJpbml0aWF0ZVwiLCB7XG4gICAgICByb29tOiByb29tXG4gICAgfSk7XG4gICAgY2hhdC5lbWl0KFwiZ2FtZUluaXRpYXRlXCIsIHtcbiAgICAgIHJvb206IHJvb21cbiAgICB9KTtcbiAgICBjaGF0LmVtaXQoXCJsb2JieUluaXRpYXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcvJyk7XG4gIH1cbn1cblxuaW5pdGlhdGUoKTtcblxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBpZiAoYXBwLnNvdXJjZS50dXJuID09IHVuZGVmaW5lZCB8fCBhcHAuc3RhdGUud2lubmVyLnN0YXRlICE9PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYXBwLnN0YXRlLnRpbWVyLnR1cm4gPiAwKSB7XG4gICAgbGV0IHRpbWVyID0gYXBwLnN0YXRlLnRpbWVyLnR1cm4gLSAyLjI7XG4gICAgaWYgKHRpbWVyIDwgMCkge1xuICAgICAgdGltZXIgPSAwO1xuICAgIH1cbiAgICBhcHAuc3RhdGUudGltZXIudHVybiA9IHRpbWVyO1xuICB9IGVsc2UgaWYgKGFwcC5zdGF0ZS50aW1lci50dXJuIDw9IDAgJiYgYXBwLnNvdXJjZS5teVR1cm4gPT09IHRydWUpIHtcbiAgICBsZXQgdGltZURpZmYgPSAoRGF0ZS5ub3coKSAtIGFwcC5zb3VyY2UudGltZXN0YW1wKSAvIDEwMDA7XG4gICAgbGV0IHRpbWVDYWxjID0gNDUgLSB0aW1lRGlmZjtcbiAgICBsZXQgcmVtYWluaW5nID0gMTAwICogKHRpbWVDYWxjIC8gNDUpO1xuICAgIC8vIGNvbnNvbGUubG9nKGFwcC5zb3VyY2UudGltZXN0YW1wLCB0aW1lRGlmZiwgdGltZUNhbGMsIHJlbWFpbmluZyk7XG5cbiAgICBpZiAoXG4gICAgICByZW1haW5pbmcgPD0gMCAmJlxuICAgICAgYXBwLnN0YXRlLnRpbWVyLnR1cm4gPD0gMCAmJlxuICAgICAgYXBwLnNvdXJjZS5teVR1cm4gPT09IHRydWVcbiAgICApIHtcbiAgICAgIGxldCBwYXlsb2FkID0ge1xuICAgICAgICBlbmVyZ3k6IHtcbiAgICAgICAgICBhOiAwLFxuICAgICAgICAgIGk6IDAsXG4gICAgICAgICAgczogMCxcbiAgICAgICAgICB3OiAwXG4gICAgICAgIH0sXG4gICAgICAgIHBhY2tldDogW11cbiAgICAgIH07XG4gICAgICBhcHAub25Eb25lKHBheWxvYWQpO1xuICAgICAgYXBwLnNvdXJjZS5teVR1cm4gPSBmYWxzZTtcbiAgICB9XG4gIH1cbn0sIDEwMDApO1xuXG53aW5kb3cub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICBkb2N1bWVudC50aXRsZSA9IFwiQW5pbWUgUnVtYmxlXCI7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxDaGF0KCkge1xuICB2YXIgY29udGFpbmVyID0gYXBwLiRlbC5xdWVyeVNlbGVjdG9yKFwiI2NoYXRcIik7XG4gIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xufVxuIiwic29ja2V0Lm9uKFwiYXBwbHlcIiwgcGF5bG9hZCA9PiB7XG4gIGRvY3VtZW50LnRpdGxlID0gXCIoISkgQW5pbWUgUnVtYmxlXCI7XG4gIHZ1ZUJpbmQocGF5bG9hZCk7XG59KTtcblxuc29ja2V0Lm9uKFwibm9NYXRjaFwiLCBwYXlsb2FkID0+IHtcbiAgY29uc29sZS5sb2coXCJub25lXCIpO1xuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShcIi9cIik7XG59KTtcblxuY2hhdC5vbihcImNoYXRcIiwgcGF5bG9hZCA9PiB7XG4gIGlmIChwYXlsb2FkLmNoYW5uZWwgPT09IFwiaW5nYW1lXCIpIHtcbiAgICBhcHAuY2hhdC5wdXNoKHBheWxvYWQubWVzc2FnZSk7XG4gICAgaWYgKGFwcC5jaGF0Q2hhbm5lbCAhPT0gXCJpbmdhbWVcIikge1xuICAgICAgYXBwLmNoYXROb3RpZi5pbmdhbWUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY3JvbGxDaGF0KCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHBheWxvYWQuY2hhbm5lbCA9PT0gXCJsb2JieVwiKSB7XG4gICAgYXBwLmxvYmJ5Y2hhdC5wdXNoKHBheWxvYWQubWVzc2FnZSk7XG5cbiAgICBpZiAoYXBwLmNoYXRDaGFubmVsICE9PSBcImxvYmJ5XCIpIHtcbiAgICAgIGFwcC5jaGF0Tm90aWYubG9iYnkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY3JvbGxDaGF0KCk7XG4gICAgfVxuICB9XG59KTtcblxuY2hhdC5vbihcImdhbWVJbml0aWF0ZVwiLCBwYXlsb2FkID0+IHtcbiAgYXBwLmNoYXQgPSBwYXlsb2FkO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzY3JvbGxDaGF0KCk7XG4gIH0sIDEwMCk7XG59KTtcbmNoYXQub24oXCJsb2JieUluaXRpYXRlXCIsIHBheWxvYWQgPT4ge1xuICBhcHAubG9iYnljaGF0ID0gcGF5bG9hZDtcbn0pO1xuIiwiZnVuY3Rpb24gZ2V0UGFyYW1ldGVyTmFtZShuYW1lLCB1cmwpIHtcbiAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlxcXFwkJlwiKTtcbiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIls/Jl1cIiArIG5hbWUgKyBcIig9KFteJiNdKil8JnwjfCQpXCIpLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIGlmICghcmVzdWx0cykgcmV0dXJuIG51bGw7XG4gIGlmICghcmVzdWx0c1syXSkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbn1cblxuY29uc3Qgc2V0Q29va2llID0gKG5hbWUsIHZhbHVlLCBkYXlzID0gNywgcGF0aCA9IFwiL1wiKSA9PiB7XG4gIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgZGF5cyAqIDg2NGU1KS50b0dNVFN0cmluZygpO1xuICBkb2N1bWVudC5jb29raWUgPVxuICAgIG5hbWUgK1xuICAgIFwiPVwiICtcbiAgICBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICtcbiAgICBcIjsgZXhwaXJlcz1cIiArXG4gICAgZXhwaXJlcyArXG4gICAgXCI7IHBhdGg9XCIgK1xuICAgIHBhdGg7XG59O1xuXG5jb25zdCBnZXRDb29raWUgPSBuYW1lID0+IHtcbiAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjsgXCIpLnJlZHVjZSgociwgdikgPT4ge1xuICAgIGNvbnN0IHBhcnRzID0gdi5zcGxpdChcIj1cIik7XG4gICAgcmV0dXJuIHBhcnRzWzBdID09PSBuYW1lID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKSA6IHI7XG4gIH0sIFwiXCIpO1xufTtcblxuY29uc3QgZGVsZXRlQ29va2llID0gKG5hbWUsIHBhdGgpID0+IHtcbiAgc2V0Q29va2llKG5hbWUsIFwiXCIsIC0xLCBwYXRoKTtcbn07XG4iXX0=
